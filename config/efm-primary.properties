# EFM Primary Node Configuration

# Cluster settings
cluster.name=efm_cluster
bind.address=172.20.0.10:7800
admin.port=7809

# Node membership
membership.path=/tmp/efm_cluster_members
is.witness=false

# Database connection information
db.host=172.20.0.10
db.port=5432
db.user=postgres
db.password.encrypted=91ef368a26253d892689a7b6b2680918
db.database=postgres
db.service.owner=postgres
db.service.name=
db.bin=/usr/lib/postgresql/17/bin
db.data.dir=/var/lib/postgresql/data
db.config.dir=/var/lib/postgresql/data

# Replication user credentials
user.email=admin@example.com
application.name=efm-primary

# Auto failover settings
auto.failover=true
auto.reconfigure=true

# Virtual IP settings (disabled for Docker environment)
virtual.ip=
virtual.ip.interface=
virtual.ip.prefix=24
virtual.ip.single=true

# Notification settings
notification.level=INFO

# Script configuration for custom actions
script.fence=
script.post.promotion=
script.post.failover=
script.remote.pre.promotion=

# Node priority (higher numbers = higher priority)
node.priority=100

# Recovery settings
recovery.check.period=10
recovery.on.standby.failure=true

# Monitoring settings
db.recovery.conf.dir=/var/lib/postgresql/data
update.physical.slots.period=0
physical.slots.update.disabled=true

# Logging settings
loglevel=INFO
logfile=/var/log/efm-5.0/efm-5.0.log
syslog.enabled=false

# Lock file
lock.dir=/var/run/efm-5.0

# Sudo configuration (not needed in Docker)
sudo.with.efm.user=false

# Ping settings for network checks
ping.server.ip=172.20.0.5

# Witness settings
stable.nodes.file=true

# JGroups settings
jgroups.loglevel=WARN

# The local.* properties are for failure detection of an agent's local database.
# local.period - number of seconds between attempts to contact the database server
local.period=10
# local.timeout - number of seconds an agent waits for a positive response 
# from the local database server
local.timeout=60
# local.timeout.final - number of seconds an agent waits after the previous checks have failed 
# to contact the database server on the current node. 
# If a response isn't received from the database within the number of seconds specified by the 
# local.timeout.final property, the database is assumed to have failed.
local.timeout.final=30

# remote.period - number of seconds between attempts to contact the remote database server
remote.period=10
# remote.timeout -  limit how many seconds an agent waits for a response 
# from a remote agent or database
remote.timeout=10

# Node heartbeat settings
node.timeout=60

# Application settings
application.name=efm_cluster_primary

# Required properties for EFM 5.0
db.reuse.connection.count=10
jdbc.sslmode=disable
auto.allow.hosts=true
encrypt.agent.messages=false
stop.isolated.primary=false
stop.failed.primary=false
primary.shutdown.as.failure=false
promotable=true
use.replay.tiebreaker=true
standby.restart.delay=0
reconfigure.num.sync=1
reconfigure.sync.primary=true
minimum.standbys=0
ping.server.command=/scripts/ping_wrapper.sh
check.vip.before.promotion=false
restart.connection.timeout=60
auto.resume.failure.period=60
auto.resume.startup.period=60
file.log.enabled=true
sudo.command=/usr/bin/sudo
sudo.user.command=/usr/bin/sudo
check.num.sync.period=5