2025-08-07 08:16:58 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 08:16:58 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 08:16:58 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 08:16:58 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 08:16:58 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 08:16:58 com.enterprisedb.efm.utils.PasswordManager decrypt WARN: java.lang.NumberFormatException: For input string: "en" under radix 16
2025-08-07 09:17:23 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:17:23 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:17:23 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:17:23 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:17:23 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:17:24 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:19:46 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:19:46 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:19:46 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:19:46 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:19:46 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:19:47 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:19:47 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:19:47 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor doPermissionsCheck WARN: User does not have permission to run query pg_wal_replay_pause
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor doPermissionsCheck WARN: User does not have the pg_read_all_settings role.
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor doPermissionsCheck WARN: User does not have permission to run query pg_wal_replay_resume
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor hasSyncReplicationPrivileges WARN: 'reconfigure.sync.primary' enabled and user does not have permission to execute 'pg_reload_conf'.
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor hasSyncReplicationPrivileges WARN: 'reconfigure.sync.primary' enabled and user does not have role 'pg_read_all_stats'.
2025-08-07 09:19:47 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 09:19:47 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 09:19:47 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 09:19:47 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 09:19:47 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 09:19:47 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 09:19:47 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 09:21:14 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:21:14 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:21:14 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:21:14 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:21:14 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:21:14 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:21:14 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:21:14 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:21:14 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 09:21:14 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 09:21:14 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 09:21:14 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 09:21:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/usr/bin/sudo /usr/edb/efm-5.0/bin/efm_root_functions dbservicestatus efm_cluster]
2025-08-07 09:21:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/usr/bin/sudo": error=2, No such file or directory', stdOut=''}
2025-08-07 09:21:14 com.enterprisedb.efm.nodes.EfmAgent verifyServiceName WARN: The database is running, but a status call using the db.service.name property returned non-zero exit code -1. This probably means there is a problem with the db.service.name value. This must be fixed before the database can be monitored.
2025-08-07 09:21:14 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 09:21:14 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 09:21:14 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 09:21:14 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 09:21:14 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 09:21:14 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 09:21:14 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 09:22:41 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:22:41 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:22:41 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:22:41 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:22:41 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:22:42 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:22:42 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:22:42 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:22:42 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 09:22:42 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 09:22:42 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 09:22:42 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 09:22:42 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 09:22:42 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 09:22:42 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 09:22:42 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 09:22:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 172.20.0.11]
2025-08-07 09:22:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 09:22:42 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.11
2025-08-07 09:22:42 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 09:22:42 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 09:22:42 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 09:22:42 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 09:22:42 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 09:22:42 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 09:22:42 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:20:04 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:20:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:20:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:20:04 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:20:04 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:20:04 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:20:05 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:20:05 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:20:05 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:20:05 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:20:05 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:20:05 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:20:05 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:20:05 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:20:05 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:20:05 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:20:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 172.20.0.11]
2025-08-07 10:20:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:20:05 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.11
2025-08-07 10:20:05 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:20:05 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:20:05 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:20:05 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:20:05 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:20:05 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:20:05 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:26:40 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:26:40 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:26:40 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:26:40 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:26:40 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:26:40 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:26:40 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:26:40 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:26:40 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:26:40 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:26:40 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:26:40 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:26:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:26:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:26:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:26:40 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:26:40 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 8.8.8.8]
2025-08-07 10:26:40 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:26:40 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 8.8.8.8
2025-08-07 10:26:40 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:26:40 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:26:40 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:26:40 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:26:40 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:26:40 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:26:40 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:30:50 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:30:50 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:30:50 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:30:50 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:30:50 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:30:50 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:30:51 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:30:51 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:30:51 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:30:51 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:30:51 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:30:51 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:30:51 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:30:51 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:30:51 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:30:51 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:30:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 1.1.1.1]
2025-08-07 10:30:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:30:51 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 1.1.1.1
2025-08-07 10:30:51 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:30:51 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:30:51 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:30:51 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:30:51 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:30:51 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:30:51 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:35:41 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:35:41 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:35:41 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:35:41 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:35:41 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:35:41 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:35:41 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:35:41 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:35:41 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:35:41 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:35:41 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:35:41 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:35:41 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:35:41 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:35:41 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:35:41 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:35:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 172.20.0.1]
2025-08-07 10:35:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:35:41 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.1
2025-08-07 10:35:41 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:35:41 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:35:41 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:35:41 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:35:41 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:35:41 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:35:41 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:38:58 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:38:58 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:38:58 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:38:58 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:38:58 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:38:58 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:38:58 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:38:58 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:38:58 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:38:58 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:38:58 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:38:58 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:38:58 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:38:58 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:38:58 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:38:58 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:38:58 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h host.docker.internal]
2025-08-07 10:38:58 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:38:58 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: host.docker.internal
2025-08-07 10:38:58 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:38:58 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:38:58 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:38:58 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:38:58 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:38:58 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:38:58 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:51:39 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:51:39 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:51:39 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:51:39 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:51:39 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:51:39 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:51:40 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:51:40 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:51:40 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:51:40 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:51:40 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:51:40 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:51:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:51:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:51:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:51:40 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:51:40 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 8.8.8.8]
2025-08-07 10:51:40 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:51:40 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 8.8.8.8
2025-08-07 10:51:40 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:51:40 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:51:40 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:51:40 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:51:40 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:51:40 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:51:40 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:59:33 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:59:33 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:59:33 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:59:33 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:59:33 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:59:34 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:59:34 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:59:34 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:59:34 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:59:34 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:59:34 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 10:59:34 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 10:59:34 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 10:59:34 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 10:59:34 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 10:59:34 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 10:59:34 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 172.20.0.5]
2025-08-07 10:59:34 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:59:34 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 10:59:34 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:59:34 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:59:34 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:59:34 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:59:34 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:59:34 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:59:34 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:04:40 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:04:40 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:04:40 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:04:40 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:04:40 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:04:41 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:04:41 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:04:41 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:04:41 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:04:41 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:04:41 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:04:41 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:04:41 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:04:41 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:04:41 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:04:41 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:04:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 172.20.0.5]
2025-08-07 11:04:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='/bin/ping: %h: Name or service not known', stdOut=''}
2025-08-07 11:04:45 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:04:45 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:04:45 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:04:45 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:04:45 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:04:45 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:04:45 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:04:45 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:08:29 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:08:29 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:08:29 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:08:29 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:08:29 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:08:29 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:08:29 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:08:29 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:08:29 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:08:29 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:08:29 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:08:29 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:08:29 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:08:29 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:08:29 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:08:29 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:08:29 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/usr/bin/ping -c1 -w5 %h 172.20.0.5]
2025-08-07 11:08:29 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='/usr/bin/ping: %h: Name or service not known', stdOut=''}
2025-08-07 11:08:29 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:08:29 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:08:29 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:08:29 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:08:29 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:08:29 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:08:29 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:08:29 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:10:04 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:10:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:10:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:10:04 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:10:04 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:10:04 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:10:04 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:10:04 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:10:04 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:10:04 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:10:04 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:10:04 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:10:04 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:10:04 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:10:04 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:10:04 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:10:04 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/usr/bin/ping -c1 %h 172.20.0.5]
2025-08-07 11:10:04 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='/usr/bin/ping: %h: Name or service not known', stdOut=''}
2025-08-07 11:10:04 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:10:04 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:10:04 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:10:04 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:10:04 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:10:04 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:10:04 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:10:04 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:11:57 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:11:57 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:11:57 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:11:57 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:11:57 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:11:57 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:11:57 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:11:57 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:11:57 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:11:57 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:11:57 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:11:57 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:11:57 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:11:57 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:11:57 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:11:57 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:11:57 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/sh -c '/usr/bin/ping -c1 $1' -- 172.20.0.5]
2025-08-07 11:11:57 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='-c1: 1: Syntax error: Unterminated quoted string', stdOut=''}
2025-08-07 11:11:57 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:11:57 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:11:57 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:11:57 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:11:57 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:11:57 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:11:57 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:11:57 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:13:00 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:13:00 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:13:00 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:13:00 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:13:00 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:13:01 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:13:01 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:13:01 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:13:01 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:13:01 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:13:01 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:13:01 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:13:01 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:13:01 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:13:01 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:13:01 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:13:01 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:13:01 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.562 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.562/0.562/0.562/0.000 ms'}
2025-08-07 11:13:01 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:13:01 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:13:01 com.enterprisedb.efm.nodes.EfmAgent run ERROR: Exception starting service
java.lang.Exception: Could not parse .nodes file to create channel.
	at com.enterprisedb.efm.Environment.createJChannel(Environment.java:668)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1292)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 11:13:01 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:13:01 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:13:01 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:13:01 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:13:01 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:13:01 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:13:01 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:13:01 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:14:20 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:14:20 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:14:20 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:14:20 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:14:20 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:14:21 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:14:21 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:14:21 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:14:21 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:14:21 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:14:21 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:14:21 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:14:21 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:14:21 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:14:21 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:14:21 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:14:21 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:14:21 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.237 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.237/0.237/0.237/0.000 ms'}
2025-08-07 11:14:21 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:14:21 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:14:21 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-9406(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:14:24 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-9406(172.20.0.10)
2025-08-07 11:14:24 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-9406(172.20.0.10)

2025-08-07 11:14:24 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:14:24 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: Updating .nodes file.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: New .nodes file information: 
2025-08-07 11:14:24 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:14:24 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:14:24 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:14:24 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:14:24 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:14:24 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.108 ms'}
2025-08-07 11:14:24 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:14:24 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:14:24 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:14:24 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:14:24 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:14:24 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:14:24 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-9406(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-9406(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode handleViewChange ERROR: The primary/promoting node has been disconnected from most of the nodes in the cluster. Will fence off in case the cluster majority will be  promoting a new primary.
2025-08-07 11:14:24 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [SEVERE] EFM Primary database being fenced off for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

The primary database has been isolated from the majority
of the cluster. The cluster is telling the primary agent
at 172.20.0.10 to fence off the primary database to
prevent two primaries when the rest of the failover manager
cluster promotes a standby.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmAgent fenceOffIsolatedPrimary ERROR: Fencing off database on this node.
2025-08-07 11:14:24 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: FENCING_ISOLATED, previous: SHUTDOWN_NODE
2025-08-07 11:14:24 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:14:24 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Primary agent exited on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:22:16 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:22:16 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:22:16 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:22:16 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:22:16 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:22:16 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:22:16 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:22:16 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:22:16 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:22:16 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:22:16 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:22:16 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:22:16 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:22:16 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:22:16 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:22:16 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:22:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:22:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.108 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.108/0.108/0.108/0.000 ms'}
2025-08-07 11:22:16 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:22:16 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:22:16 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-23597(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:22:19 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-23597(172.20.0.10)
2025-08-07 11:22:19 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-23597(172.20.0.10)

2025-08-07 11:22:19 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:22:19 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: Updating .nodes file.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: New .nodes file information: 
2025-08-07 11:22:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:22:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:22:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:22:19 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:22:19 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:22:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.098 ms'}
2025-08-07 11:22:19 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:22:19 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:22:19 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:22:19 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:22:19 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:22:19 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:22:19 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-23597(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-23597(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode handleViewChange ERROR: The primary/promoting node has been disconnected from most of the nodes in the cluster. Will fence off in case the cluster majority will be  promoting a new primary.
2025-08-07 11:22:19 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [SEVERE] EFM Primary database being fenced off for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

The primary database has been isolated from the majority
of the cluster. The cluster is telling the primary agent
at 172.20.0.10 to fence off the primary database to
prevent two primaries when the rest of the failover manager
cluster promotes a standby.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmAgent fenceOffIsolatedPrimary ERROR: Fencing off database on this node.
2025-08-07 11:22:19 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: FENCING_ISOLATED, previous: SHUTDOWN_NODE
2025-08-07 11:22:19 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:22:19 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Primary agent exited on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:25:25 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:25:25 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:25:25 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:25:25 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:25:25 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:25:25 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:25:25 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:25:25 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:25:25 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:25:25 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:25:25 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:25:25 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:25:25 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:25:25 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:25:25 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:25:25 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:25:25 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:25:25 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.119 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.119/0.119/0.119/0.000 ms'}
2025-08-07 11:25:25 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:25:25 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:25:25 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-17162(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:25:28 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-17162(172.20.0.10)
2025-08-07 11:25:28 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-17162(172.20.0.10)

2025-08-07 11:25:28 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:25:28 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: Updating .nodes file.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: New .nodes file information: 
2025-08-07 11:25:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:25:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:25:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:25:28 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:25:28 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:25:28 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:25:28 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:25:28 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:25:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.108 ms'}
2025-08-07 11:25:28 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:25:28 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:25:28 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:25:28 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-17162(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-17162(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange ERROR: The primary/promoting node has been disconnected from most of the nodes in the cluster. Will fence off in case the cluster majority will be  promoting a new primary.
2025-08-07 11:25:28 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [SEVERE] EFM Primary database being fenced off for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

The primary database has been isolated from the majority
of the cluster. The cluster is telling the primary agent
at 172.20.0.10 to fence off the primary database to
prevent two primaries when the rest of the failover manager
cluster promotes a standby.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmAgent fenceOffIsolatedPrimary ERROR: Fencing off database on this node.
2025-08-07 11:25:28 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: FENCING_ISOLATED, previous: SHUTDOWN_NODE
2025-08-07 11:25:28 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:25:28 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Primary agent exited on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:26:33 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:26:33 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:26:33 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:26:33 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:26:33 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:26:33 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:26:33 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:26:33 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:26:33 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:26:33 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:26:33 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:26:33 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:26:33 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:26:33 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:26:33 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:26:33 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:26:33 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:26:33 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.591 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.591/0.591/0.591/0.000 ms'}
2025-08-07 11:26:33 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:26:33 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:26:33 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-45554(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:26:36 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-45554(172.20.0.10)
2025-08-07 11:26:36 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:26:36 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-45554(172.20.0.10)

2025-08-07 11:26:36 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:26:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:26:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:26:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:26:36 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:26:36 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:26:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.108 ms'}
2025-08-07 11:26:36 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:26:36 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:26:36 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:26:36 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:26:36 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:26:36 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:26:36 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-45554(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-45554(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode handleViewChange ERROR: The primary/promoting node has been disconnected from most of the nodes in the cluster. Will fence off in case the cluster majority will be  promoting a new primary.
2025-08-07 11:26:36 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [SEVERE] EFM Primary database being fenced off for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

The primary database has been isolated from the majority
of the cluster. The cluster is telling the primary agent
at 172.20.0.10 to fence off the primary database to
prevent two primaries when the rest of the failover manager
cluster promotes a standby.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmAgent fenceOffIsolatedPrimary ERROR: Fencing off database on this node.
2025-08-07 11:26:36 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: FENCING_ISOLATED, previous: SHUTDOWN_NODE
2025-08-07 11:26:36 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:26:36 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Primary agent exited on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:34:18 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:34:18 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:34:18 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:34:18 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:34:18 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:34:18 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:34:18 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:34:18 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:34:19 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:34:19 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:34:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:34:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:34:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:34:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:34:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:34:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:34:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:34:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.363 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.363/0.363/0.363/0.000 ms'}
2025-08-07 11:34:19 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:34:19 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:34:19 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-65090(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:34:22 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-65090(172.20.0.10)
2025-08-07 11:34:22 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-65090(172.20.0.10)

2025-08-07 11:34:22 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:34:22 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:34:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:34:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:34:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='120'}
2025-08-07 11:34:22 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:34:22 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:34:22 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:34:22 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:34:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.154 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.154/0.154/0.154/0.000 ms'}
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-65090(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-65090(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:34:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-65090(172.20.0.10).
2025-08-07 11:34:22 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 11:34:22 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:34:22 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:35:04 org.jgroups.protocols.AUTH warn WARN: pg-primary-65090(172.20.0.10): failed to validate AuthHeader (token: DynamicMembershipToken) from pg-standby-9205(172.20.0.11); dropping message and sending rejection message
2025-08-07 11:35:09 org.jgroups.protocols.AUTH warn WARN: pg-primary-65090(172.20.0.10): failed to validate AuthHeader (token: DynamicMembershipToken) from efm-witness-13826(172.20.0.12); dropping message and sending rejection message
2025-08-07 11:36:02 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 11:36:02 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:36:02 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 11:36:02 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 11:36:02 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 1 primary: pg-primary-65090(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:36:02 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 11:36:23 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:36:23 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:36:23 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:36:23 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:36:23 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:36:23 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:36:23 com.enterprisedb.efm.utils.LockFile lock WARN: Lock file already exists: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:37:06 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:37:06 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:37:06 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:37:06 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:37:06 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:37:06 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:37:06 com.enterprisedb.efm.utils.LockFile lock WARN: Lock file already exists: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:37:12 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:37:12 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:37:12 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:37:12 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:37:12 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:37:13 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:37:13 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:37:13 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:37:13 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:37:13 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 11:37:13 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:37:13 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 11:37:13 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.118 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.118/0.118/0.118/0.000 ms'}
2025-08-07 11:37:13 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:37:13 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-30354(172.20.0.10) Total jgroups nodes: 3
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-24508(172.20.0.11)
	efm-witness-22447(172.20.0.12)
	pg-primary-30354(172.20.0.10)

2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.052 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.052/0.052/0.052/0.000 ms'}
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:37:13 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-standby-24508(172.20.0.11).
2025-08-07 11:37:13 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-standby-24508(172.20.0.11)
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:37:13 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (1): pg-primary-30354(172.20.0.10)  failed (0):  ]
2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='492'}
2025-08-07 11:37:13 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:37:13 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:37:13 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Idle agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Idle agent is running. After starting the local database, the agent can be resumed.
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmAgent run INFO: Running as the db owner: true
2025-08-07 11:37:13 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Idle agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:38:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-07 11:38:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:38:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring WARN: Cannot connect to database or determine recovery status:org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.. SQL state: 08001
2025-08-07 11:38:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Could not resume monitoring: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:38:45 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-07 11:38:45 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-24508(172.20.0.11)}, NodeStatus{type='Idle', address=pg-primary-30354(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-22447(172.20.0.12)}]}
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (1): pg-primary-30354(172.20.0.10)  failed (0):  ]
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-07 11:38:46 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-07 11:38:53 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-07 11:39:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-07 11:39:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:39:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring WARN: Cannot connect to database or determine recovery status:org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.. SQL state: 08001
2025-08-07 11:39:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Could not resume monitoring: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:40:12 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:40:12 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:40:12 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:40:12 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:40:12 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:40:13 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:40:13 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:40:13 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:40:13 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:40:13 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 11:40:13 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:40:13 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 11:40:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:40:13 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 11:40:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 11:40:13 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:40:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.584 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.584/0.584/0.584/0.000 ms'}
2025-08-07 11:40:13 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:40:13 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:40:13 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-13837(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:40:16 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:40:16 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-13837(172.20.0.10)

2025-08-07 11:40:16 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:40:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:40:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:40:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='101'}
2025-08-07 11:40:16 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:40:16 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:40:16 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Idle agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Idle agent is running. After starting the local database, the agent can be resumed.
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmAgent run INFO: Running as the db owner: true
2025-08-07 11:40:16 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Idle agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:40:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.093 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.093/0.093/0.093/0.000 ms'}
2025-08-07 11:40:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (1): pg-primary-13837(172.20.0.10)  failed (0):  ]
2025-08-07 11:41:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-07 11:41:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:41:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring WARN: Cannot connect to database or determine recovery status:org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.. SQL state: 08001
2025-08-07 11:41:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Could not resume monitoring: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:41:56 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:41:56 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 11:41:56 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-07 11:41:56 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 1 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (1): pg-primary-13837(172.20.0.10)  failed (0):  ]
2025-08-07 11:42:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-07 11:42:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:42:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring WARN: Cannot connect to database or determine recovery status:org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.. SQL state: 08001
2025-08-07 11:42:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Could not resume monitoring: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:43:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-07 11:43:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:43:13 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring WARN: Cannot connect to database or determine recovery status:org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.. SQL state: 08001
2025-08-07 11:43:13 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Could not resume monitoring: org.postgresql.util.PSQLException: Connection to 172.20.0.10:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:44:19 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:44:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:44:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:44:19 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:44:19 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:44:20 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:44:20 com.enterprisedb.efm.utils.LockFile lock WARN: Lock file already exists: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:45:09 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:45:09 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:45:09 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:45:09 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:45:09 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:45:09 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:45:09 com.enterprisedb.efm.utils.LockFile lock WARN: Lock file already exists: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:46:14 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:46:14 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:46:14 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:46:14 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:46:14 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:46:15 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:46:15 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:46:15 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:46:15 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:46:15 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:46:15 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:46:15 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:46:15 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:46:15 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:46:15 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:46:15 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:46:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:46:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.092 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.092/0.092/0.092/0.000 ms'}
2025-08-07 11:46:15 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:46:15 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:46:15 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-56605(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:46:18 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-56605(172.20.0.10)
2025-08-07 11:46:18 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-56605(172.20.0.10)

2025-08-07 11:46:18 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:46:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:46:18 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:46:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:46:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='128'}
2025-08-07 11:46:18 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:46:18 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:46:18 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:46:18 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:46:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.054 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.054/0.054/0.054/0.000 ms'}
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-56605(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:46:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-56605(172.20.0.10).
2025-08-07 11:46:18 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 11:46:18 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:46:18 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-56605(172.20.0.10) Total jgroups nodes: 2
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:00 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-56605(172.20.0.10)
	pg-standby-6615(172.20.0.11)

2025-08-07 11:47:00 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:47:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:47:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.071 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.071/0.071/0.071/0.000 ms'}
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-56605(172.20.0.10), previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 2 contains the previous primary pg-primary-56605(172.20.0.10).
2025-08-07 11:47:01 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-6615(172.20.0.11)
2025-08-07 11:47:01 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:47:01 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:47:01 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-07 11:47:01 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-56605(172.20.0.10) Total jgroups nodes: 3
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:13 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-56605(172.20.0.10)
	pg-standby-6615(172.20.0.11)
	efm-witness-62326(172.20.0.12)

2025-08-07 11:47:13 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:47:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:47:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.056 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.056/0.056/0.056/0.000 ms'}
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-56605(172.20.0.10), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-primary-56605(172.20.0.10).
2025-08-07 11:47:14 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 11:48:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 11:48:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-07 11:48:18 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 11:48:53 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:48:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 11:48:53 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 11:48:53 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 11:48:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (1): efm-witness-62326(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:48:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 11:49:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 11:49:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-07 11:50:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-07 11:50:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-07 11:50:11 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Witness', address=efm-witness-62326(172.20.0.12)}, NodeStatus{type='Primary', address=pg-primary-56605(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-6615(172.20.0.11)}]}
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (1): efm-witness-62326(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:50:11 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 11:50:12 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 11:50:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 11:50:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 11:50:15 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=1, errorOut='', stdOut=''}
2025-08-07 11:57:13 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:57:13 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:57:13 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:57:13 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:57:13 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:57:13 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:57:13 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:57:13 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:57:13 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:57:13 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:13 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 11:57:13 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 11:57:13 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 11:57:13 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 11:57:13 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 11:57:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:57:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.096 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.096/0.096/0.096/0.000 ms'}
2025-08-07 11:57:13 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:57:13 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:57:13 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-3167(172.20.0.10) Total jgroups nodes: 1
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:16 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-3167(172.20.0.10)
2025-08-07 11:57:16 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-3167(172.20.0.10)

2025-08-07 11:57:16 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:57:16 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:57:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:57:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:57:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='128'}
2025-08-07 11:57:16 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:57:16 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:57:16 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:16 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:57:16 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 11:57:16 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:57:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.075 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.075/0.075/0.075/0.000 ms'}
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-3167(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:16 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-3167(172.20.0.10).
2025-08-07 11:57:16 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-3167(172.20.0.10) Total jgroups nodes: 2
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:59 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-3167(172.20.0.10)
	pg-standby-50670(172.20.0.11)

2025-08-07 11:57:59 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.062 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.062/0.062/0.062/0.000 ms'}
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-3167(172.20.0.10), previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 2 contains the previous primary pg-primary-3167(172.20.0.10).
2025-08-07 11:57:59 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-50670(172.20.0.11)
2025-08-07 11:57:59 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:57:59 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-3167(172.20.0.10) Total jgroups nodes: 3
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:58:12 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-3167(172.20.0.10)
	pg-standby-50670(172.20.0.11)
	efm-witness-50408(172.20.0.12)

2025-08-07 11:58:12 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:58:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:58:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.060 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.060/0.060/0.060/0.000 ms'}
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-3167(172.20.0.10), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-primary-3167(172.20.0.10).
2025-08-07 11:58:12 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 11:59:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 11:59:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-07 11:59:16 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 11:59:52 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 11:59:52 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:59:52 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 11:59:52 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 11:59:52 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:59:52 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 12:00:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 12:00:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:00:19 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 12:00:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 12:00:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 12:00:19 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 12:00:19 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 12:00:19 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 12:00:19 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:00:19 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:00:19 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 12:00:19 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:00:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:00:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 12:00:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 12:00:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 12:00:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 12:00:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 12:00:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:00:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.134 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.134/0.134/0.134/0.000 ms'}
2025-08-07 12:00:19 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 12:00:19 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 12:00:19 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 12:00:51 org.jgroups.protocols.pbcast.GMS warn WARN: pg-primary-41545(172.20.0.10): too many JOIN attempts (10): becoming singleton
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-41545(172.20.0.10) Total jgroups nodes: 1
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:00:51 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-41545(172.20.0.10)
2025-08-07 12:00:51 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-41545(172.20.0.10)

2025-08-07 12:00:51 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:00:51 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 12:00:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:00:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 12:00:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='124'}
2025-08-07 12:00:51 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 12:00:51 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 12:00:51 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:00:51 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 12:00:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.131 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.131/0.131/0.131/0.000 ms'}
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-41545(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-41545(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:00:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-41545(172.20.0.10).
2025-08-07 12:00:51 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 12:00:51 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 12:00:51 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-41545(172.20.0.10) Total jgroups nodes: 3
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-41545(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view is merge view.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-50670(172.20.0.11)
	efm-witness-50408(172.20.0.12)
	pg-primary-41545(172.20.0.10)

2025-08-07 12:01:57 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:01:57 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.096 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.096/0.096/0.096/0.000 ms'}
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode checkForReplacementPrimary INFO: checkForReplacementPrimary called with retries=5
2025-08-07 12:01:57 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:01:57 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-41545(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:02:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 12:02:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:02:31 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:02:31 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 12:02:31 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Node is no longer coordinator. Returning from call to verify cluster state.
2025-08-07 12:02:46 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 12:02:46 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 12:02:46 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 12:02:46 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 12:02:46 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 12:02:46 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 12:02:46 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:02:46 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:02:46 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 12:02:46 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:02:46 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:02:46 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 12:02:46 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 12:02:46 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 12:02:46 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 12:02:46 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 12:02:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:02:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.097 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.097/0.097/0.097/0.000 ms'}
2025-08-07 12:02:46 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 12:02:46 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 12:02:46 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-13192(172.20.0.10) Total jgroups nodes: 1
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:02:49 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-13192(172.20.0.10)
2025-08-07 12:02:49 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-13192(172.20.0.10)

2025-08-07 12:02:49 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:02:49 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:02:49 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 12:02:49 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 12:02:49 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='124'}
2025-08-07 12:02:49 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 12:02:49 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 12:02:49 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:02:49 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 12:02:49 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 12:02:49 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 12:02:49 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.142 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.142/0.142/0.142/0.000 ms'}
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-13192(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:02:49 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-13192(172.20.0.10).
2025-08-07 12:02:49 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-13192(172.20.0.10) Total jgroups nodes: 2
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:32 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:03:32 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-13192(172.20.0.10)
	pg-standby-43969(172.20.0.11)

2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.083 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.083/0.083/0.083/0.000 ms'}
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-13192(172.20.0.10), previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 2 contains the previous primary pg-primary-13192(172.20.0.10).
2025-08-07 12:03:32 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-43969(172.20.0.11)
2025-08-07 12:03:32 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 12:03:32 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-13192(172.20.0.10) Total jgroups nodes: 3
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-13192(172.20.0.10)
	pg-standby-43969(172.20.0.11)
	efm-witness-21098(172.20.0.12)

2025-08-07 12:03:45 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:03:45 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:03:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:03:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.049 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.049/0.049/0.049/0.000 ms'}
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-13192(172.20.0.10), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-primary-13192(172.20.0.10).
2025-08-07 12:03:45 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 12:04:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 12:04:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:04:49 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 12:05:25 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 12:05:25 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:05:25 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:05:25 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:05:25 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (1): efm-witness-21098(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:05:25 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 12:05:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 12:05:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:06:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 12:06:46 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:13:46 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-07 12:13:46 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-07 12:13:46 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-07 12:13:46 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:13:46 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:13:46 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Witness', address=efm-witness-21098(172.20.0.12)}, NodeStatus{type='Primary', address=pg-primary-13192(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-43969(172.20.0.11)}]}
2025-08-07 12:13:46 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (1): efm-witness-21098(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:13:47 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:13:47 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:13:48 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:13:48 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:27:42 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 12:27:42 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 12:27:42 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 12:27:42 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 12:27:42 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 12:27:42 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 12:27:42 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:27:42 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:27:42 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 12:27:42 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:27:42 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:27:42 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 12:27:42 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 12:27:42 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 12:27:42 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 12:27:42 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 12:27:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:27:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.118 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.118/0.118/0.118/0.000 ms'}
2025-08-07 12:27:42 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 12:27:42 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 12:27:42 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-57387(172.20.0.10) Total jgroups nodes: 1
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:27:45 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-57387(172.20.0.10)
2025-08-07 12:27:45 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-57387(172.20.0.10)

2025-08-07 12:27:45 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:27:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:27:45 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 12:27:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 12:27:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='124'}
2025-08-07 12:27:45 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 12:27:45 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 12:27:45 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:27:45 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 12:27:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.098 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.098/0.098/0.098/0.000 ms'}
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-57387(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:27:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-57387(172.20.0.10).
2025-08-07 12:27:45 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 12:27:45 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 12:27:45 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-57387(172.20.0.10) Total jgroups nodes: 2
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:28 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:28:28 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-57387(172.20.0.10)
	pg-standby-36746(172.20.0.11)

2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.067 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.067/0.067/0.067/0.000 ms'}
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-57387(172.20.0.10), previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 2 contains the previous primary pg-primary-57387(172.20.0.10).
2025-08-07 12:28:28 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-36746(172.20.0.11)
2025-08-07 12:28:28 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 12:28:28 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-57387(172.20.0.10) Total jgroups nodes: 3
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (1): pg-standby-36746(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:41 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-57387(172.20.0.10)
	pg-standby-36746(172.20.0.11)
	efm-witness-4164(172.20.0.12)

2025-08-07 12:28:41 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:28:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:28:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.068 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.068/0.068/0.068/0.000 ms'}
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-57387(172.20.0.10), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (1): pg-standby-36746(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-primary-57387(172.20.0.10).
2025-08-07 12:28:41 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 12:29:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 12:29:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:29:45 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 12:30:21 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:30:21 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 12:30:21 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 12:30:21 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 12:30:21 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (1): pg-standby-36746(172.20.0.11)  witnesses (1): efm-witness-4164(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:30:21 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 12:30:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 12:30:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-07 12:31:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 12:31:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=1, errorOut='', stdOut=''}
2025-08-07 13:29:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 12:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 13:29:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=12, exitValue=1, errorOut='', stdOut=''}
2025-08-07 13:31:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 13:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 13:31:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=13, exitValue=1, errorOut='', stdOut=''}
2025-08-07 13:33:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 14:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 13:33:42 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=14, exitValue=1, errorOut='', stdOut=''}
2025-08-07 13:39:46 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 13:39:46 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 13:39:46 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 13:39:46 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 13:39:46 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 13:39:47 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 13:39:47 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 13:39:47 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 13:39:47 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 13:39:47 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:39:47 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:39:47 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-07 13:39:47 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-07 13:39:47 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-07 13:39:47 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-07 13:39:47 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-07 13:39:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:39:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.095 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.095/0.095/0.095/0.000 ms'}
2025-08-07 13:39:47 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 13:39:47 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 13:39:47 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-842(172.20.0.10) Total jgroups nodes: 1
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:39:50 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-842(172.20.0.10)
2025-08-07 13:39:50 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 13:39:50 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-842(172.20.0.10)

2025-08-07 13:39:50 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 13:39:50 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 13:39:50 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 13:39:50 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='125'}
2025-08-07 13:39:50 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 13:39:50 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 13:39:50 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:39:50 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 13:39:50 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.161 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.161/0.161/0.161/0.000 ms'}
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-842(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-842(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:39:50 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-842(172.20.0.10).
2025-08-07 13:39:50 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-07 13:39:50 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 13:39:50 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-842(172.20.0.10) Total jgroups nodes: 2
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-842(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:32 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-842(172.20.0.10)
	pg-standby-40823(172.20.0.11)

2025-08-07 13:40:32 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 13:40:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:40:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.099 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.099/0.099/0.099/0.000 ms'}
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-842(172.20.0.10), previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-842(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 2 contains the previous primary pg-primary-842(172.20.0.10).
2025-08-07 13:40:33 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-40823(172.20.0.11)
2025-08-07 13:40:33 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 13:40:33 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 13:40:33 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-07 13:40:33 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-842(172.20.0.10) Total jgroups nodes: 3
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:45 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-842(172.20.0.10)
	pg-standby-40823(172.20.0.11)
	efm-witness-14202(172.20.0.12)

2025-08-07 13:40:45 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 13:40:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:40:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.055 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.055/0.055/0.055/0.000 ms'}
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-842(172.20.0.10), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-primary-842(172.20.0.10).
2025-08-07 13:40:46 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 13:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 13:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-07 13:41:50 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 13:42:25 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 13:42:25 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 13:42:25 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-07 13:42:25 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-07 13:42:25 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 13:42:25 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 13:42:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 13:42:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-07 13:43:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 13:43:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=1, errorOut='', stdOut=''}
2025-08-07 14:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 12:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 14:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=12, exitValue=1, errorOut='', stdOut=''}
2025-08-07 14:43:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 13:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 14:43:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=13, exitValue=1, errorOut='', stdOut=''}
2025-08-07 14:45:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 14:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 14:45:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=14, exitValue=1, errorOut='', stdOut=''}
2025-08-07 15:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 15:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 15:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=15, exitValue=1, errorOut='', stdOut=''}
2025-08-07 15:44:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 16:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 15:44:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=16, exitValue=1, errorOut='', stdOut=''}
2025-08-07 15:47:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 17:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 15:47:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=17, exitValue=1, errorOut='', stdOut=''}
2025-08-07 16:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 18:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 16:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=18, exitValue=1, errorOut='', stdOut=''}
2025-08-07 16:45:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 19:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 16:45:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=19, exitValue=1, errorOut='', stdOut=''}
2025-08-07 16:49:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 20:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 16:49:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=20, exitValue=1, errorOut='', stdOut=''}
2025-08-07 17:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 21:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 17:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=21, exitValue=1, errorOut='', stdOut=''}
2025-08-07 17:46:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 22:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 17:46:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=22, exitValue=1, errorOut='', stdOut=''}
2025-08-07 17:51:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 23:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 17:51:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=23, exitValue=1, errorOut='', stdOut=''}
2025-08-07 18:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 24:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 18:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=24, exitValue=1, errorOut='', stdOut=''}
2025-08-07 18:47:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 25:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 18:47:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=25, exitValue=1, errorOut='', stdOut=''}
2025-08-07 18:53:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 26:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 18:53:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=26, exitValue=1, errorOut='', stdOut=''}
2025-08-07 19:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 27:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 19:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=27, exitValue=1, errorOut='', stdOut=''}
2025-08-07 19:48:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 28:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 19:48:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=28, exitValue=1, errorOut='', stdOut=''}
2025-08-07 19:55:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 29:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 19:55:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=29, exitValue=1, errorOut='', stdOut=''}
2025-08-07 20:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 30:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 20:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=30, exitValue=1, errorOut='', stdOut=''}
2025-08-07 20:49:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 31:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 20:49:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=31, exitValue=1, errorOut='', stdOut=''}
2025-08-07 20:57:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 32:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 20:57:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=32, exitValue=1, errorOut='', stdOut=''}
2025-08-07 21:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 33:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 21:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=33, exitValue=1, errorOut='', stdOut=''}
2025-08-07 21:50:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 34:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 21:50:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=34, exitValue=1, errorOut='', stdOut=''}
2025-08-07 21:59:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 35:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 21:59:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=35, exitValue=1, errorOut='', stdOut=''}
2025-08-07 22:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 36:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 22:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=36, exitValue=1, errorOut='', stdOut=''}
2025-08-07 22:51:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 37:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 22:51:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=37, exitValue=1, errorOut='', stdOut=''}
2025-08-07 23:01:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 38:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-07 23:01:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=38, exitValue=1, errorOut='', stdOut=''}
2025-08-07 23:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 39:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-07 23:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=39, exitValue=1, errorOut='', stdOut=''}
2025-08-07 23:52:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 40:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-07 23:52:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=40, exitValue=1, errorOut='', stdOut=''}
2025-08-08 00:03:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 41:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-08 00:03:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=41, exitValue=1, errorOut='', stdOut=''}
2025-08-08 00:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 42:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 00:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=42, exitValue=1, errorOut='', stdOut=''}
2025-08-08 00:53:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 43:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-08 00:53:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=43, exitValue=1, errorOut='', stdOut=''}
2025-08-08 01:05:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 44:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-08 01:05:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=44, exitValue=1, errorOut='', stdOut=''}
2025-08-08 01:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 45:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 01:41:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=45, exitValue=1, errorOut='', stdOut=''}
2025-08-08 01:54:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 46:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-08 01:54:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=46, exitValue=1, errorOut='', stdOut=''}
2025-08-08 01:55:21 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 01:55:21 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 01:55:21 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 01:55:21 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 01:55:21 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 01:55:21 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 01:55:21 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 01:55:22 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 01:55:22 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 01:55:23 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 01:55:23 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:03:09 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:03:09 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:03:09 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:03:09 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:03:09 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:03:09 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:03:09 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:03:16 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:03:16 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:03:16 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:03:16 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:03:16 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:03:16 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:03:16 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:03:33 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:03:33 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:07:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 47:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-08 02:07:47 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=47, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:10:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:10:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:10:11 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:11 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:10:12 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:10:18 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:10:18 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent prepareForSwitchover WARN: Will prepare for switchover with upcoming promotion.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent stopMonitoringForManualPromotion INFO: Will stop monitoring database for manual promotion
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: PROMOTING, previous: MONITORING
2025-08-08 02:10:18 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-08 02:10:18 com.enterprisedb.efm.utils.Utils pause WARN: Thread main interrupted while waiting.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Db monitor has stopped. Current internal state: PROMOTING
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: For switchover case, not performing cleanup (e.g. dropping VIP) until after db shutdown.
2025-08-08 02:10:18 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.11.
2025-08-08 02:10:18 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.10.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent stopDatabase WARN: Stopping local database.
2025-08-08 02:10:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 48:[ /usr/edb/efm-5.0/bin/efm_db_functions stopdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=48, exitValue=0, errorOut='', stdOut='waiting for server to shut down....... done
server stopped'}
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Primary, will now be Idle.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-primary-842(172.20.0.10)
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-842(172.20.0.10) of type PRIMARY from cluster state. Adding it back in as type IDLE.
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Creating list of standbys to consider for promotion.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Only one standby to choose from: StandbyInfo{address=pg-standby-40823(172.20.0.11), host='172.20.0.11', receiveLocation='null', replayLocation='null', (latest='')}
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent startMonitoring WARN: Will tell standby at 172.20.0.11 to promote.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Telling standby at 172.20.0.11 to promote.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request promote_self_172.20.0.10 to node pg-standby-40823(172.20.0.11)
2025-08-08 02:10:22 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Received value=true, received=true, suspected=false for promote_self_172.20.0.10 from pg-standby-40823(172.20.0.11).
2025-08-08 02:10:22 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Node 172.20.0.11 will attempt promotion.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Setting state back to MONITORING instead of PROMOTING
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: PROMOTING
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent run INFO: Running as the db owner: true
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing standby address pg-standby-40823(172.20.0.11)
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: []
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-40823(172.20.0.11) of type STANDBY from cluster state. Adding it back in as type PROMOTING.
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Received signal to switch to new primary. Node type is IDLE and internal state is MONITORING.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Reconfiguring database as standby.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.RecoveryUtils addRecoveryParamsToPrimary INFO: Updating recovery parameters.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent createStandbySignalFile INFO: Creating standby.signal file to start original primary as standby.
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 50:[ /usr/edb/efm-5.0/bin/efm_db_functions touchfile /var/lib/postgresql/data/standby.signal]
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=50, exitValue=0, errorOut='', stdOut=''}
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Restarting database as standby.
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 51:[ /usr/edb/efm-5.0/bin/efm_db_functions startdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=51, exitValue=0, errorOut='', stdOut='waiting for server to start....2025-08-08 02:10:22 GMT [19829]: [1-1] user=,db=,app=,client= LOG:  redirecting log output to logging collector process
2025-08-08 02:10:22 GMT [19829]: [2-1] user=,db=,app=,client= HINT:  Future log output will appear in directory "/var/log/postgresql".
 done
server started'}
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoringWithRetries INFO: Resuming monitoring.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Database version has already been set in environment.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Idle, will now be Standby.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing idle address pg-primary-842(172.20.0.10)
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-842(172.20.0.10) of type IDLE from cluster state. Adding it back in as type STANDBY.
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:10:22 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.10]
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: An existing agent is no longer IDLE. All nodes will verify that they can connect to the database.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent lambda$resumeMonitoring$3 INFO: Resuming monitoring.
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:10:22 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-standby-40823(172.20.0.11)
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor lambda$watchDB$1 WARN: Database connection is null.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:10:32 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Enabling fencing/post-promotion scripts on this node.
2025-08-08 02:10:32 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing promoting address pg-standby-40823(172.20.0.11)
2025-08-08 02:10:32 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-40823(172.20.0.11) of type PROMOTING from cluster state. Adding it back in as type PRIMARY.
2025-08-08 02:10:32 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-standby-40823(172.20.0.11)
2025-08-08 02:10:32 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:10:39 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:10:39 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:10:40 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:10:52 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:10:52 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:10:52 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:10:52 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:10:52 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:10:52 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:11:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:11:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:11:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:11:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:11:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:11:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:11:29 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:12:05 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Node is being asked for recovery parameters. Returning 172.20.0.10 for primary to pull params.
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-standby-40823(172.20.0.11)
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-40823(172.20.0.11) of type PRIMARY from cluster state. Adding it back in as type IDLE.
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby promoteNode INFO: Adding doPromoteNode to work queue.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Entering doPromoteNode()
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 53:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=53, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.175 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.175/0.175/0.175/0.000 ms'}
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Checking to see if primary has rejoined before promoting this standby.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Idle
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Ignoring own node status.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Witness
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Checking for view changes that may have happened while handling this one. Current view size 3 and total nodes is 3.0
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Standby, will now be Promoting.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmPromoting lambda$startPromotionMonitoring$0 INFO: Will monitor database until it is no longer in recovery. At that time, will switch to primary node.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Promoting
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing standby address pg-primary-842(172.20.0.10)
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: []
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-842(172.20.0.10) of type STANDBY from cluster state. Adding it back in as type PROMOTING.
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPrePromotionScript INFO: Notifying all nodes to execute pre-promotion script
2025-08-08 02:12:09 com.enterprisedb.efm.utils.RecoveryUtils promoteStandby INFO: Triggering promotion by executing pg_ctl promote.
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 54:[ /usr/edb/efm-5.0/bin/efm_db_functions promotestandby /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=54, exitValue=0, errorOut='', stdOut='server promoting'}
2025-08-08 02:12:09 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Promotion has started on cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Promotion of standby has started on cluster efm_cluster.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: About to resume replay on promoting node. This is only needed in some cases and will not affect a database that has aleady come out of recovery.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Promotion has started on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Could not resume replay on node being promoted. This is normal if the database has already completed recovery. Message from database server: org.postgresql.util.PSQLException: ERROR: standby promotion is ongoing
  Hint: pg_wal_replay_resume() cannot be executed after promotion is triggered.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToReconfigureForNewPrimary INFO: Informing all nodes of new promoting/primary address so that they can reconfigure.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing idle address pg-standby-40823(172.20.0.11)
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-40823(172.20.0.11) of type IDLE from cluster state. Adding it back in as type STANDBY.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-40823(172.20.0.11)
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:12:09 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: An existing agent is no longer IDLE. All nodes will verify that they can connect to the database.
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:12:13 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.10%%true%% %%false
2025-08-08 02:12:17 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.10%%true%% %%false
2025-08-08 02:12:19 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover has completed on cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover has completed on cluster efm_cluster.
2025-08-08 02:12:19 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover has completed on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:12:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Promoting, will now be Primary.
2025-08-08 02:12:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:12:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:12:19 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:12:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:12:19 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing promoting address pg-primary-842(172.20.0.10)
2025-08-08 02:12:19 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-842(172.20.0.10) of type PROMOTING from cluster state. Adding it back in as type PRIMARY.
2025-08-08 02:12:19 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-842(172.20.0.10)
2025-08-08 02:12:19 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:12:19 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPostPromotionScript INFO: Notifying all nodes to execute post-promotion script
2025-08-08 02:12:23 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:12:23 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:14:05 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:05 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:14:17 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:17 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:17 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:17 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:17 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:14:17 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:17 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 55:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:14:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=55, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:14:27 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:14:27 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent prepareForSwitchover WARN: Will prepare for switchover with upcoming promotion.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent stopMonitoringForManualPromotion INFO: Will stop monitoring database for manual promotion
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: PROMOTING, previous: MONITORING
2025-08-08 02:14:27 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-08 02:14:27 com.enterprisedb.efm.utils.Utils pause WARN: Thread db_monitor_resumed interrupted while waiting.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Db monitor has stopped. Current internal state: PROMOTING
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: For switchover case, not performing cleanup (e.g. dropping VIP) until after db shutdown.
2025-08-08 02:14:27 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.11.
2025-08-08 02:14:27 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.10.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent stopDatabase WARN: Stopping local database.
2025-08-08 02:14:27 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 56:[ /usr/edb/efm-5.0/bin/efm_db_functions stopdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=56, exitValue=0, errorOut='', stdOut='waiting for server to shut down....... done
server stopped'}
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Primary, will now be Idle.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-primary-842(172.20.0.10)
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-842(172.20.0.10) of type PRIMARY from cluster state. Adding it back in as type IDLE.
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Creating list of standbys to consider for promotion.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Only one standby to choose from: StandbyInfo{address=pg-standby-40823(172.20.0.11), host='172.20.0.11', receiveLocation='null', replayLocation='null', (latest='')}
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent startMonitoring WARN: Will tell standby at 172.20.0.11 to promote.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Telling standby at 172.20.0.11 to promote.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request promote_self_172.20.0.10 to node pg-standby-40823(172.20.0.11)
2025-08-08 02:14:30 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Received value=true, received=true, suspected=false for promote_self_172.20.0.10 from pg-standby-40823(172.20.0.11).
2025-08-08 02:14:30 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Node 172.20.0.11 will attempt promotion.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Setting state back to MONITORING instead of PROMOTING
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: PROMOTING
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing standby address pg-standby-40823(172.20.0.11)
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: []
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-40823(172.20.0.11) of type STANDBY from cluster state. Adding it back in as type PROMOTING.
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Received signal to switch to new primary. Node type is IDLE and internal state is MONITORING.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Reconfiguring database as standby.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.RecoveryUtils addRecoveryParamsToPrimary INFO: Updating recovery parameters.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent createStandbySignalFile INFO: Creating standby.signal file to start original primary as standby.
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 57:[ /usr/edb/efm-5.0/bin/efm_db_functions touchfile /var/lib/postgresql/data/standby.signal]
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=57, exitValue=0, errorOut='', stdOut=''}
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Restarting database as standby.
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 58:[ /usr/edb/efm-5.0/bin/efm_db_functions startdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=58, exitValue=0, errorOut='', stdOut='waiting for server to start....2025-08-08 02:14:30 GMT [20516]: [1-1] user=,db=,app=,client= LOG:  redirecting log output to logging collector process
2025-08-08 02:14:30 GMT [20516]: [2-1] user=,db=,app=,client= HINT:  Future log output will appear in directory "/var/log/postgresql".
 done
server started'}
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoringWithRetries INFO: Resuming monitoring.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Database version has already been set in environment.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Idle, will now be Standby.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing idle address pg-primary-842(172.20.0.10)
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-842(172.20.0.10) of type IDLE from cluster state. Adding it back in as type STANDBY.
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:14:30 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.10]
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: An existing agent is no longer IDLE. All nodes will verify that they can connect to the database.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent lambda$resumeMonitoring$3 INFO: Resuming monitoring.
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-standby-40823(172.20.0.11)
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor lambda$watchDB$1 WARN: Database connection is null.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:14:37 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:37 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:37 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:37 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:14:37 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Promoting', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:37 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-standby-40823(172.20.0.11) standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:40 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Enabling fencing/post-promotion scripts on this node.
2025-08-08 02:14:40 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing promoting address pg-standby-40823(172.20.0.11)
2025-08-08 02:14:40 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-40823(172.20.0.11) of type PROMOTING from cluster state. Adding it back in as type PRIMARY.
2025-08-08 02:14:40 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-standby-40823(172.20.0.11)
2025-08-08 02:14:40 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:14:43 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:43 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:43 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:43 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:14:43 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:43 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:45 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:45 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:45 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:14:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:56 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:17:19 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-08 02:17:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-08 02:17:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-08 02:17:19 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-08 02:17:19 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-08 02:17:19 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-08 02:17:19 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:17:19 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:17:19 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-08 02:17:19 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:17:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:17:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:17:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:17:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:17:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.577 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.577/0.577/0.577/0.000 ms'}
2025-08-08 02:17:19 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-08 02:17:19 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-08 02:17:19 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-60825(172.20.0.10) Total jgroups nodes: 1
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:17:22 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:17:22 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.10]
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-60825(172.20.0.10)

2025-08-08 02:17:22 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-08 02:17:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:17:22 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-08 02:17:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-08 02:17:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='115'}
2025-08-08 02:17:22 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-08 02:17:22 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-08 02:17:22 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:17:22 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:17:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.061 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.061/0.061/0.061/0.000 ms'}
2025-08-08 02:17:22 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:17:22 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:17:22 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:17:22 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-60825(172.20.0.10) Total jgroups nodes: 2
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: null promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:05 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-60825(172.20.0.10)
	pg-standby-8889(172.20.0.11)

2025-08-08 02:18:05 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.060 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.060/0.060/0.060/0.000 ms'}
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:05 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-standby-8889(172.20.0.11)
2025-08-08 02:18:05 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-08 02:18:05 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-60825(172.20.0.10) Total jgroups nodes: 3
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:18 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-60825(172.20.0.10)
	pg-standby-8889(172.20.0.11)
	efm-witness-6116(172.20.0.12)

2025-08-08 02:18:18 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-08 02:18:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:18:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.063 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.063/0.063/0.063/0.000 ms'}
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-standby-8889(172.20.0.11), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-standby-8889(172.20.0.11).
2025-08-08 02:18:18 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-08 02:19:22 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-08 02:19:58 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-08 02:19:58 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-08 02:19:58 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:19:58 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:19:58 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-08 02:28:48 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:28:48 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:28:48 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:28:48 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:28:48 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Primary', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:28:48 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:28:56 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:29:08 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:29:08 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Primary', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:29:08 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received switchover request.
2025-08-08 02:29:08 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: |false|false
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Switchover command passed source node: "", quiet mode: "false", scripts off: "false"
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Using local recovery settings to send to primary.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode doManualPromotion INFO: Starting manual promotion.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode doManualPromotion WARN: Telling primary node pg-standby-8889(172.20.0.11) to stop monitoring database.
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-standby-8889(172.20.0.11)
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-8889(172.20.0.11) of type PRIMARY from cluster state. Adding it back in as type IDLE.
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby promoteNode INFO: Adding doPromoteNode to work queue.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Entering doPromoteNode()
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.318 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.318/0.318/0.318/0.000 ms'}
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Checking to see if primary has rejoined before promoting this standby.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Ignoring own node status.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Idle
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Witness
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Checking for view changes that may have happened while handling this one. Current view size 3 and total nodes is 3.0
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Standby, will now be Promoting.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmPromoting lambda$startPromotionMonitoring$0 INFO: Will monitor database until it is no longer in recovery. At that time, will switch to primary node.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Promoting
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing standby address pg-primary-60825(172.20.0.10)
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: []
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-60825(172.20.0.10) of type STANDBY from cluster state. Adding it back in as type PROMOTING.
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPrePromotionScript INFO: Notifying all nodes to execute pre-promotion script
2025-08-08 02:29:12 com.enterprisedb.efm.utils.RecoveryUtils promoteStandby INFO: Triggering promotion by executing pg_ctl promote.
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions promotestandby /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=0, errorOut='', stdOut='server promoting'}
2025-08-08 02:29:12 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Promotion has started on cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Promotion of standby has started on cluster efm_cluster.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: About to resume replay on promoting node. This is only needed in some cases and will not affect a database that has aleady come out of recovery.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Promotion has started on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Could not resume replay on node being promoted. This is normal if the database has already completed recovery. Message from database server: org.postgresql.util.PSQLException: ERROR: standby promotion is ongoing
  Hint: pg_wal_replay_resume() cannot be executed after promotion is triggered.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToReconfigureForNewPrimary INFO: Informing all nodes of new promoting/primary address so that they can reconfigure.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing idle address pg-standby-8889(172.20.0.11)
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-8889(172.20.0.11) of type IDLE from cluster state. Adding it back in as type STANDBY.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-8889(172.20.0.11)
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:29:12 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: An existing agent is no longer IDLE. All nodes will verify that they can connect to the database.
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:29:12 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:29:12 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.10%%true%% %%false
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Promoting', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:29:19 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:29:19 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:29:19 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:29:19 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.10%%true%% %%false
2025-08-08 02:29:19 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Promoting', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:29:19 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:29:22 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover has completed on cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover has completed on cluster efm_cluster.
2025-08-08 02:29:22 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover has completed on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:29:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Promoting, will now be Primary.
2025-08-08 02:29:22 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:29:22 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:29:22 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:29:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:29:22 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing promoting address pg-primary-60825(172.20.0.10)
2025-08-08 02:29:22 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-60825(172.20.0.10) of type PROMOTING from cluster state. Adding it back in as type PRIMARY.
2025-08-08 02:29:22 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-60825(172.20.0.10)
2025-08-08 02:29:22 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:29:22 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPostPromotionScript INFO: Notifying all nodes to execute post-promotion script
2025-08-08 02:29:25 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:29:25 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:31:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:31:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:31:58 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:31:58 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:31:58 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:31:58 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:31:58 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:31:58 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:31:58 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-60825(172.20.0.10) promoting: null standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:31:59 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received switchover request.
2025-08-08 02:31:59 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: |false|false
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Switchover command passed source node: "", quiet mode: "false", scripts off: "false"
2025-08-08 02:31:59 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Retrieving recovery information from pg-standby-8889(172.20.0.11).
2025-08-08 02:31:59 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_recovery_conf_text to node pg-standby-8889(172.20.0.11)
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent prepareForSwitchover WARN: Will prepare for switchover with upcoming promotion.
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmNode doManualPromotion INFO: Starting manual promotion.
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent stopMonitoringForManualPromotion INFO: Will stop monitoring database for manual promotion
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: PROMOTING, previous: MONITORING
2025-08-08 02:31:59 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-08 02:31:59 com.enterprisedb.efm.utils.Utils pause WARN: Thread main interrupted while waiting.
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Db monitor has stopped. Current internal state: PROMOTING
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: For switchover case, not performing cleanup (e.g. dropping VIP) until after db shutdown.
2025-08-08 02:31:59 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.11.
2025-08-08 02:31:59 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.10.
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent stopDatabase WARN: Stopping local database.
2025-08-08 02:31:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 12:[ /usr/edb/efm-5.0/bin/efm_db_functions stopdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=12, exitValue=0, errorOut='', stdOut='waiting for server to shut down....... done
server stopped'}
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Primary, will now be Idle.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-primary-60825(172.20.0.10)
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-60825(172.20.0.10) of type PRIMARY from cluster state. Adding it back in as type IDLE.
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Creating list of standbys to consider for promotion.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Only one standby to choose from: StandbyInfo{address=pg-standby-8889(172.20.0.11), host='172.20.0.11', receiveLocation='null', replayLocation='null', (latest='')}
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent startMonitoring WARN: Will tell standby at 172.20.0.11 to promote.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Telling standby at 172.20.0.11 to promote.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request promote_self_172.20.0.10 to node pg-standby-8889(172.20.0.11)
2025-08-08 02:32:02 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Received value=true, received=true, suspected=false for promote_self_172.20.0.10 from pg-standby-8889(172.20.0.11).
2025-08-08 02:32:02 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Node 172.20.0.11 will attempt promotion.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Setting state back to MONITORING instead of PROMOTING
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: PROMOTING
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent run INFO: Running as the db owner: true
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.10%%false%% %%false
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing standby address pg-standby-8889(172.20.0.11)
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: []
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-8889(172.20.0.11) of type STANDBY from cluster state. Adding it back in as type PROMOTING.
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Received signal to switch to new primary. Node type is IDLE and internal state is MONITORING.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Reconfiguring database as standby.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.RecoveryUtils addRecoveryParamsToPrimary INFO: Updating recovery parameters.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent createStandbySignalFile INFO: Creating standby.signal file to start original primary as standby.
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 13:[ /usr/edb/efm-5.0/bin/efm_db_functions touchfile /var/lib/postgresql/data/standby.signal]
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=13, exitValue=0, errorOut='', stdOut=''}
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Restarting database as standby.
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 14:[ /usr/edb/efm-5.0/bin/efm_db_functions startdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=14, exitValue=0, errorOut='', stdOut='waiting for server to start....2025-08-08 02:32:02 GMT [1167]: [1-1] user=,db=,app=,client= LOG:  redirecting log output to logging collector process
2025-08-08 02:32:02 GMT [1167]: [2-1] user=,db=,app=,client= HINT:  Future log output will appear in directory "/var/log/postgresql".
 done
server started'}
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoringWithRetries INFO: Resuming monitoring.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Database version has already been set in environment.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Idle, will now be Standby.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing idle address pg-primary-60825(172.20.0.10)
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-60825(172.20.0.10) of type IDLE from cluster state. Adding it back in as type STANDBY.
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:32:02 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.10]
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: An existing agent is no longer IDLE. All nodes will verify that they can connect to the database.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent lambda$resumeMonitoring$3 INFO: Resuming monitoring.
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:32:02 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-standby-8889(172.20.0.11)
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor lambda$watchDB$1 WARN: Database connection is null.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:32:03 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:32:03 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:32:03 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:32:03 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:32:03 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Promoting', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:32:03 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-standby-8889(172.20.0.11) standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:32:12 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Enabling fencing/post-promotion scripts on this node.
2025-08-08 02:32:12 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing promoting address pg-standby-8889(172.20.0.11)
2025-08-08 02:32:12 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-8889(172.20.0.11) of type PROMOTING from cluster state. Adding it back in as type PRIMARY.
2025-08-08 02:32:12 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-standby-8889(172.20.0.11)
2025-08-08 02:32:12 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:33:03 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:33:03 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:33:03 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:33:03 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:33:03 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Primary', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:33:03 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:33:04 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received switchover request.
2025-08-08 02:33:04 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: |false|false
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Switchover command passed source node: "", quiet mode: "false", scripts off: "false"
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Using local recovery settings to send to primary.
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmNode doManualPromotion INFO: Starting manual promotion.
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmNode doManualPromotion WARN: Telling primary node pg-standby-8889(172.20.0.11) to stop monitoring database.
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-standby-8889(172.20.0.11)
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby promoteNode INFO: Adding doPromoteNode to work queue.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-8889(172.20.0.11) of type PRIMARY from cluster state. Adding it back in as type IDLE.
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Entering doPromoteNode()
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 16:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=16, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.451 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.451/0.451/0.451/0.000 ms'}
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Checking to see if primary has rejoined before promoting this standby.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.10%%true%% %%false
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Ignoring own node status.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Idle
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Witness
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Checking for view changes that may have happened while handling this one. Current view size 3 and total nodes is 3.0
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Standby, will now be Promoting.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmPromoting lambda$startPromotionMonitoring$0 INFO: Will monitor database until it is no longer in recovery. At that time, will switch to primary node.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Promoting
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing standby address pg-primary-60825(172.20.0.10)
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: []
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-60825(172.20.0.10) of type STANDBY from cluster state. Adding it back in as type PROMOTING.
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPrePromotionScript INFO: Notifying all nodes to execute pre-promotion script
2025-08-08 02:33:07 com.enterprisedb.efm.utils.RecoveryUtils promoteStandby INFO: Triggering promotion by executing pg_ctl promote.
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 17:[ /usr/edb/efm-5.0/bin/efm_db_functions promotestandby /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=17, exitValue=0, errorOut='', stdOut='server promoting'}
2025-08-08 02:33:07 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Promotion has started on cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Promotion of standby has started on cluster efm_cluster.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: About to resume replay on promoting node. This is only needed in some cases and will not affect a database that has aleady come out of recovery.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Could not resume replay on node being promoted. This is normal if the database has already completed recovery. Message from database server: org.postgresql.util.PSQLException: ERROR: standby promotion is ongoing
  Hint: pg_wal_replay_resume() cannot be executed after promotion is triggered.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Promotion has started on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToReconfigureForNewPrimary INFO: Informing all nodes of new promoting/primary address so that they can reconfigure.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing idle address pg-standby-8889(172.20.0.11)
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-standby-8889(172.20.0.11) of type IDLE from cluster state. Adding it back in as type STANDBY.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-8889(172.20.0.11)
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:33:07 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: An existing agent is no longer IDLE. All nodes will verify that they can connect to the database.
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:33:14 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:33:14 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:33:14 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:33:14 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.10%%true%% %%false
2025-08-08 02:33:14 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Promoting', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:33:14 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:33:16 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:33:16 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:33:16 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:33:16 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.10%%true%% %%false
2025-08-08 02:33:16 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Promoting', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:33:16 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:33:17 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover has completed on cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover has completed on cluster efm_cluster.
2025-08-08 02:33:17 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover has completed on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:33:17 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Promoting, will now be Primary.
2025-08-08 02:33:17 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:33:17 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:33:17 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:33:17 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:33:17 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing promoting address pg-primary-60825(172.20.0.10)
2025-08-08 02:33:17 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: Removed pg-primary-60825(172.20.0.10) of type PROMOTING from cluster state. Adding it back in as type PRIMARY.
2025-08-08 02:33:17 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-60825(172.20.0.10)
2025-08-08 02:33:17 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:33:17 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPostPromotionScript INFO: Notifying all nodes to execute post-promotion script
2025-08-08 02:33:19 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:33:19 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:33:19 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:33:19 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:33:19 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:33:19 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:33:19 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-60825(172.20.0.10) promoting: null standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:35:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 18:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:35:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=18, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:36:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 19:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-08 02:36:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=19, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:37:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 20:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-08 02:37:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=20, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:56:13 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-08 02:56:13 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-08 02:56:13 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-08 02:56:13 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-08 02:56:13 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-08 02:56:14 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-08 02:56:14 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:56:14 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:56:14 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-08 02:56:14 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:56:14 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:56:14 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-08 02:56:14 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:56:14 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:56:14 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:56:14 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:56:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:56:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.356 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.356/0.356/0.356/0.000 ms'}
2025-08-08 02:56:14 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-08 02:56:14 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-08 02:56:14 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-2485(172.20.0.10) Total jgroups nodes: 1
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:56:17 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-2485(172.20.0.10)
2025-08-08 02:56:17 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-2485(172.20.0.10)

2025-08-08 02:56:17 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-08 02:56:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:56:17 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-08 02:56:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-08 02:56:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='116'}
2025-08-08 02:56:17 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-08 02:56:17 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-08 02:56:17 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:56:17 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:56:17 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.111 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.111/0.111/0.111/0.000 ms'}
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-2485(172.20.0.10), previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:56:17 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 1 contains the previous primary pg-primary-2485(172.20.0.10).
2025-08-08 02:56:17 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster
Body:
EFM node:     172.20.0.10
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-08 02:56:17 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:56:17 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.10 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-2485(172.20.0.10) Total jgroups nodes: 2
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:00 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-08 02:57:00 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-2485(172.20.0.10)
	pg-standby-56895(172.20.0.11)

2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.052 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.052/0.052/0.052/0.000 ms'}
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-2485(172.20.0.10), previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 2 contains the previous primary pg-primary-2485(172.20.0.10).
2025-08-08 02:57:00 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request is_promotable to node pg-standby-56895(172.20.0.11)
2025-08-08 02:57:00 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-08 02:57:00 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode addToClusterStatus INFO: A new database node has joined the cluster. All nodes will verify that they can connect to the database.
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-primary-2485(172.20.0.10) Total jgroups nodes: 3
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:13 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-2485(172.20.0.10)
	pg-standby-56895(172.20.0.11)
	efm-witness-11471(172.20.0.12)

2025-08-08 02:57:13 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-08 02:57:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:57:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.042 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.042/0.042/0.042/0.000 ms'}
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-2485(172.20.0.10), previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view of size 3 contains the previous primary pg-primary-2485(172.20.0.10).
2025-08-08 02:57:13 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-08 02:58:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:58:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:58:17 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-08 02:58:53 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-08 02:58:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-08 02:58:53 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:58:53 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 02:58:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (1): efm-witness-11471(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:58:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-08 02:59:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-08 02:59:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-08 03:00:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-08 03:00:14 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=1, errorOut='', stdOut=''}
2025-08-08 03:23:02 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 03:23:02 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 03:23:02 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 03:23:02 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 03:23:02 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
2025-08-08 03:23:02 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-56895(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-11471(172.20.0.12)}, NodeStatus{type='Primary', address=pg-primary-2485(172.20.0.10)}]}
2025-08-08 03:23:02 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (1): efm-witness-11471(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 03:23:08 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 03:23:08 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.10%%true%% %%false
