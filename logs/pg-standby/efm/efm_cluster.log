2025-08-07 09:18:09 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:18:09 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:18:09 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:18:09 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:18:09 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:18:09 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:20:01 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:20:01 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:20:01 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:20:01 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:20:01 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:20:02 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:20:02 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:20:02 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:20:02 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 09:20:02 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 09:20:02 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 09:20:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 09:20:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 8.8.8.8]
2025-08-07 09:20:02 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 09:20:02 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 09:20:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 09:20:02 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 8.8.8.8
2025-08-07 09:20:02 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 09:20:02 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 09:20:02 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 09:20:02 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 09:20:02 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 09:20:02 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 09:20:02 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 09:20:02 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 09:21:29 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:21:29 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:21:29 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:21:29 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:21:29 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:21:29 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:21:29 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:21:29 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:21:29 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 09:21:29 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 09:21:29 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 09:21:29 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 09:21:29 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 172.20.0.10]
2025-08-07 09:21:29 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 09:21:29 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.10
2025-08-07 09:21:29 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 09:21:29 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 09:21:29 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 09:21:29 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 09:21:29 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 09:21:29 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 09:21:29 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 09:21:29 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 09:21:29 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 09:21:29 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 09:22:56 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 09:22:56 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 09:22:56 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 09:22:56 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 09:22:56 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 09:22:56 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 09:22:56 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:22:56 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 09:22:56 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 09:22:56 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 09:22:56 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 09:22:56 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 09:22:56 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 172.20.0.11]
2025-08-07 09:22:56 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 09:22:56 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.11
2025-08-07 09:22:56 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 09:22:56 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 09:22:56 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 09:22:56 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 09:22:56 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 09:22:56 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 09:22:56 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 09:22:56 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 09:22:56 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 09:22:56 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 10:20:50 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:20:50 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:20:50 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:20:50 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:20:50 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:20:50 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:20:50 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:20:50 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:20:50 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 10:20:50 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 10:20:50 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:20:50 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 10:20:50 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 172.20.0.11]
2025-08-07 10:20:50 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:20:50 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.11
2025-08-07 10:20:50 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:20:50 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:20:50 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:20:50 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:20:50 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 10:20:50 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 10:20:50 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:20:50 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:20:50 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:20:50 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 10:27:25 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:27:25 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:27:25 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:27:25 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:27:25 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:27:26 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:27:26 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:27:26 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:27:26 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 10:27:26 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 10:27:26 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:27:26 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 10:27:26 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 8.8.8.8]
2025-08-07 10:27:26 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:27:26 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 8.8.8.8
2025-08-07 10:27:26 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:27:26 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:27:26 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:27:26 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 10:27:26 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:27:26 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 10:27:26 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:27:26 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:27:26 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:27:26 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 10:31:36 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:31:36 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:31:36 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:31:36 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:31:36 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:31:36 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:31:36 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:31:36 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:31:36 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 10:31:36 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 10:31:36 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:31:36 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 10:31:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 1.1.1.1]
2025-08-07 10:31:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:31:36 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 1.1.1.1
2025-08-07 10:31:36 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 10:31:36 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:31:36 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:31:36 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:31:36 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:31:36 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:31:36 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 10:31:36 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:31:36 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:31:36 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 10:36:26 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:36:26 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:36:26 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:36:26 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:36:26 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:36:27 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:36:27 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:36:27 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:36:27 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 10:36:27 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 10:36:27 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:36:27 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 10:36:27 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 172.20.0.1]
2025-08-07 10:36:27 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:36:27 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.1
2025-08-07 10:36:27 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:36:27 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:36:27 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:36:27 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:36:27 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:36:27 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:36:27 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:39:43 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:39:43 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:39:43 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:39:43 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:39:43 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:39:43 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:39:43 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:39:43 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:39:44 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 10:39:44 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 10:39:44 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:39:44 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 10:39:44 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h host.docker.internal]
2025-08-07 10:39:44 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:39:44 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: host.docker.internal
2025-08-07 10:39:44 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:39:44 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:39:44 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:39:44 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:39:44 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 10:39:44 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 10:39:44 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:39:44 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:39:44 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 10:39:44 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 10:52:25 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 10:52:25 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 10:52:25 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 10:52:25 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 10:52:25 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 10:52:25 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 10:52:25 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:52:25 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 10:52:25 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 10:52:25 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 10:52:25 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 10:52:25 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 10:52:25 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 8.8.8.8]
2025-08-07 10:52:25 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 10:52:25 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 8.8.8.8
2025-08-07 10:52:25 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 10:52:25 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 10:52:25 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 10:52:25 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 10:52:25 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 10:52:25 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 10:52:25 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 10:52:25 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 10:52:25 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:00:19 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:00:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:00:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:00:19 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:00:19 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:00:19 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:00:19 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:00:19 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:00:19 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Could not connect to database on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0. Error: org.postgresql.util.PSQLException: Connection to 172.20.0.11:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.
2025-08-07 11:00:19 com.enterprisedb.efm.DBMonitor initConnectionAndStatement WARN: Connection failure cause:
java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:547)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:602)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:633)
	at org.postgresql.core.PGStream.createSocket(PGStream.java:243)
	at org.postgresql.core.PGStream.<init>(PGStream.java:98)
	at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:136)
	at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:262)
	at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)
	at org.postgresql.jdbc.PgConnection.<init>(PgConnection.java:273)
	at org.postgresql.Driver.makeConnection(Driver.java:446)
	at org.postgresql.Driver.connect(Driver.java:298)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)
	at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:190)
	at com.enterprisedb.efm.DBMonitor.initConnectionAndStatement(DBMonitor.java:1500)
	at com.enterprisedb.efm.DBMonitor.<init>(DBMonitor.java:198)
	at com.enterprisedb.efm.utils.DBUtils.createLongRunningMonitor(DBUtils.java:76)
	at com.enterprisedb.efm.nodes.EfmAgent.determineStartupAgentType(EfmAgent.java:1179)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1219)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 11:00:19 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:00:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-07 11:00:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 3:[/bin/ping -c1 -w5 %h 172.20.0.5]
2025-08-07 11:00:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=3, exitValue=-1, errorOut='java.io.IOException: Cannot run program "/bin/ping": error=2, No such file or directory', stdOut=''}
2025-08-07 11:00:19 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:00:19 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:00:19 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:00:19 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:00:19 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:00:19 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Starting auto resume check for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent on this node will check every 60 seconds to see
if it can resume monitoring the failed database. The cluster
should be checked during this time and the agent stopped
if the database will not be started again. See the agent
log for more details.
2025-08-07 11:00:19 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:00:19 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:00:19 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:00:19 com.enterprisedb.efm.nodes.EfmZombie lambda$new$0 INFO: Starting check to see if agent can resume. Will check every 60 seconds.
2025-08-07 11:00:19 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The agent has exited.
2025-08-07 11:05:26 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:05:26 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:05:26 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:05:26 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:05:26 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:05:26 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:05:26 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:05:26 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:05:26 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:05:26 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:05:26 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:05:26 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:05:26 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:05:26 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/ping -c1 -w5 %h 172.20.0.5]
2025-08-07 11:05:27 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='/bin/ping: %h: Name or service not known', stdOut=''}
2025-08-07 11:05:27 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:05:27 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:05:27 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:05:27 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:05:27 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:05:27 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:05:27 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:05:27 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:08:43 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:08:43 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:08:43 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:08:43 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:08:43 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:08:44 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:08:44 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:08:44 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:08:44 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:08:44 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:08:44 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:08:44 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:08:44 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:08:44 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/usr/bin/ping -c1 -w5 %h 172.20.0.5]
2025-08-07 11:08:44 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='/usr/bin/ping: %h: Name or service not known', stdOut=''}
2025-08-07 11:08:44 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:08:44 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:08:44 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:08:44 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:08:44 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:08:44 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:08:44 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:08:44 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:10:19 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:10:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:10:19 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:10:19 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:10:19 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:10:19 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:10:19 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:10:19 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:10:19 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:10:19 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:10:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:10:19 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:10:19 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:10:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/usr/bin/ping -c1 %h 172.20.0.5]
2025-08-07 11:10:19 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='/usr/bin/ping: %h: Name or service not known', stdOut=''}
2025-08-07 11:10:19 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:10:19 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:10:19 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:10:19 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:10:19 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:10:19 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:10:19 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:10:19 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:12:12 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:12:12 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:12:12 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:12:12 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:12:12 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:12:12 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:12:12 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:12:12 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:12:12 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:12:12 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:12:12 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:12:12 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:12:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:12:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/bin/sh -c '/usr/bin/ping -c1 $1' -- 172.20.0.5]
2025-08-07 11:12:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=2, errorOut='-c1: 1: Syntax error: Unterminated quoted string', stdOut=''}
2025-08-07 11:12:12 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:12:12 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:12:12 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:12:12 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:12:12 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:12:12 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:12:12 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:12:12 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:13:15 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:13:15 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:13:15 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:13:15 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:13:15 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:13:16 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:13:16 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:13:16 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:13:16 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:13:16 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:13:16 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:13:16 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:13:16 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:13:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:13:16 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.171 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.171/0.171/0.171/0.000 ms'}
2025-08-07 11:13:16 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:13:16 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:13:16 com.enterprisedb.efm.nodes.EfmAgent run ERROR: Exception starting service
java.lang.Exception: Could not parse .nodes file to create channel.
	at com.enterprisedb.efm.Environment.createJChannel(Environment.java:668)
	at com.enterprisedb.efm.nodes.EfmNode.doStartup(EfmNode.java:1292)
	at com.enterprisedb.efm.nodes.EfmAgent.run(EfmAgent.java:231)
	at com.enterprisedb.efm.main.ServiceCommand.main(ServiceCommand.java:116)
2025-08-07 11:13:16 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:13:16 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:13:16 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:13:16 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:13:16 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:13:16 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:13:16 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:13:16 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:14:35 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:14:35 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:14:35 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:14:35 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:14:35 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:14:36 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:14:36 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:14:36 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:14:36 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:14:36 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:14:36 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:14:36 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:14:36 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:14:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:14:36 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.128 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.128/0.128/0.128/0.000 ms'}
2025-08-07 11:14:36 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:14:36 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:14:36 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.11:7800]
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-51653(172.20.0.11) Total jgroups nodes: 1
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:14:39 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:14:39 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-51653(172.20.0.11)

2025-08-07 11:14:39 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:14:39 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: Updating .nodes file.
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: New .nodes file information: 
2025-08-07 11:14:39 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:14:39 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:14:39 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:14:39 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:14:39 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:14:39 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:14:39 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.090 ms'}
2025-08-07 11:14:39 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:14:39 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:14:39 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:14:39 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:14:39 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:14:39 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:14:39 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-51653(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:14:39 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Standby agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:22:30 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:22:30 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:22:30 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:22:30 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:22:30 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:22:31 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:22:31 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:22:31 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:22:31 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:22:31 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:22:31 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:22:31 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:22:31 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:22:31 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:22:31 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.116 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.116/0.116/0.116/0.000 ms'}
2025-08-07 11:22:31 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:22:31 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:22:31 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.11:7800]
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-22498(172.20.0.11) Total jgroups nodes: 1
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:22:34 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:22:34 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-22498(172.20.0.11)

2025-08-07 11:22:34 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:22:34 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: Updating .nodes file.
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode updateNodesFile INFO: New .nodes file information: 
2025-08-07 11:22:34 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[sh, -c, ps h -o ppid $$]
2025-08-07 11:22:34 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:22:34 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:22:34 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:22:34 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:22:34 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.'}
2025-08-07 11:22:34 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:22:34 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:22:34 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:22:34 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:22:34 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:22:34 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:22:34 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:22:34 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-22498(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:22:34 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Standby agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:26:48 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:26:48 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:26:48 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:26:48 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:26:48 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:26:48 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:26:48 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:26:48 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:26:48 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:26:48 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:26:48 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:26:48 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:26:48 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:26:48 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:26:48 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.096 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.096/0.096/0.096/0.000 ms'}
2025-08-07 11:26:48 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:26:48 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:26:48 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-35961(172.20.0.11) Total jgroups nodes: 1
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:26:51 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:26:51 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-35961(172.20.0.11)

2025-08-07 11:26:51 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:26:51 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:26:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:26:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:26:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=127, errorOut='sh: 1: ps: not found', stdOut=''}
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: MONITORING
2025-08-07 11:26:51 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:26:51 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode commonShutdown WARN: 1 tasks not run in queue during shutdown.
2025-08-07 11:26:51 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=-1, errorOut='java.lang.InterruptedException', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.110 ms'}
2025-08-07 11:26:51 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier shutdown INFO: Background cluster state verifier stopping.
2025-08-07 11:26:51 com.enterprisedb.efm.utils.ClusterUtils pingHost WARN: Unable to ping host: 172.20.0.5
2025-08-07 11:26:51 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:26:51 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode simpleIsolationCheck WARN: Cannot ping WKA. Current members are [none]
2025-08-07 11:26:51 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:26:51 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:26:51 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM One or more nodes isolated from network for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

This node appears to be isolated from the network. Other members
seen in the cluster are: [none].
2025-08-07 11:26:51 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-35961(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:26:51 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Standby agent exited on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Database health is not being monitored.
2025-08-07 11:35:04 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:35:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:35:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:35:04 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:35:04 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:35:04 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:35:04 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:35:04 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:35:04 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:35:04 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:35:04 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:35:04 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:35:04 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:35:04 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:35:04 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.134 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.134/0.134/0.134/0.000 ms'}
2025-08-07 11:35:04 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:35:04 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:35:04 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:35:04 com.enterprisedb.efm.nodes.EfmAgent run ERROR: Exception starting service: java.lang.SecurityException: authentication failed
2025-08-07 11:35:04 com.enterprisedb.efm.nodes.EfmAgent shutdown INFO: Starting shutdown.
2025-08-07 11:35:04 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: SHUTDOWN_NODE, previous: STARTING
2025-08-07 11:35:04 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor shutdown INFO: Primary num_sync monitor shutting down.
2025-08-07 11:35:04 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-07 11:35:04 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 11:35:04 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-07 11:35:04 com.enterprisedb.efm.nodes.EfmNode commonShutdown INFO: This node coordinator during cluster shutdown: false
2025-08-07 11:35:04 com.enterprisedb.efm.admin.AdminServer shutdown INFO: Stopping AdminServer...
2025-08-07 11:36:38 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:36:38 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:36:38 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:36:38 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:36:38 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:36:38 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:36:38 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:36:38 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:36:38 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:36:38 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:36:38 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:36:38 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:36:38 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:36:38 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:36:38 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.149 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.149/0.149/0.149/0.000 ms'}
2025-08-07 11:36:38 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:36:38 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:36:38 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-24508(172.20.0.11) Total jgroups nodes: 1
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:36:41 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:36:41 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-24508(172.20.0.11)

2025-08-07 11:36:41 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:36:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:36:41 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:36:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:36:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='107'}
2025-08-07 11:36:41 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:36:41 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:36:41 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:36:41 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:36:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.102 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.102/0.102/0.102/0.000 ms'}
2025-08-07 11:36:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:36:41 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 11:36:41 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:36:41 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:36:43 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-24508(172.20.0.11) Total jgroups nodes: 2
2025-08-07 11:36:43 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:36:43 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:36:43 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:36:43 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-24508(172.20.0.11)
	efm-witness-22447(172.20.0.12)

2025-08-07 11:36:43 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:36:43 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.067 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.067/0.067/0.067/0.000 ms'}
2025-08-07 11:36:43 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:36:44 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-24508(172.20.0.11) Total jgroups nodes: 3
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:37:13 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:37:13 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-24508(172.20.0.11)
	efm-witness-22447(172.20.0.12)
	pg-primary-30354(172.20.0.10)

2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:37:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.052 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.052/0.052/0.052/0.000 ms'}
2025-08-07 11:37:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 2, cluster state (not including additions): [ total nodes: 2 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:37:13 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 11:38:41 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:38:45 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-07 11:38:45 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-24508(172.20.0.11)}, NodeStatus{type='Idle', address=pg-primary-30354(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-22447(172.20.0.12)}]}
2025-08-07 11:38:45 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (1): pg-primary-30354(172.20.0.10)  failed (0):  ]
2025-08-07 11:38:46 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:38:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: false
2025-08-07 11:38:53 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:38:53 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:38:53 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-24508(172.20.0.11)  witnesses (1): efm-witness-22447(172.20.0.12)  idle nodes (1): pg-primary-30354(172.20.0.10)  failed (0):  ]
2025-08-07 11:44:24 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:44:24 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:44:24 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:44:24 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:44:24 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:44:25 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:44:25 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:44:25 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:44:25 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:44:25 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:44:25 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:44:25 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:44:25 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:44:25 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:44:25 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.106 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.106/0.106/0.106/0.000 ms'}
2025-08-07 11:44:25 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:44:25 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:44:25 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-16396(172.20.0.11) Total jgroups nodes: 1
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:44:28 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.11 from failed list if present.
2025-08-07 11:44:28 com.enterprisedb.efm.ClusterState rebuildFOPriority INFO: New failover priority list: [172.20.0.11]
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: This node is coordinator. Not checking properties.
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Adding hosts from .nodes file to allowed host list.
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-16396(172.20.0.11)

2025-08-07 11:44:28 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:44:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:44:28 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:44:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:44:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='108'}
2025-08-07 11:44:28 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:44:28 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:44:28 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:44:28 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:44:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.078 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.078/0.078/0.078/0.000 ms'}
2025-08-07 11:44:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 0, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-16396(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:44:28 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 11:44:28 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:44:28 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:44:30 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-16396(172.20.0.11) Total jgroups nodes: 2
2025-08-07 11:44:30 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-16396(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:44:30 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 11:44:30 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-16396(172.20.0.11)
	efm-witness-55370(172.20.0.12)

2025-08-07 11:44:30 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 11:44:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:44:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.049 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.049/0.049/0.049/0.000 ms'}
2025-08-07 11:44:30 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 1, cluster state (not including additions): [ total nodes: 1 primary: null promoting: null standbys (1): pg-standby-16396(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:44:30 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.12 from failed list if present.
2025-08-07 11:45:24 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:45:24 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:45:24 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:45:24 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:45:24 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:45:24 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:45:24 com.enterprisedb.efm.utils.LockFile lock WARN: Lock file already exists: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:47:00 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:47:00 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:47:00 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:47:00 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:47:00 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:47:00 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:47:00 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:47:00 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:47:00 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:47:00 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:47:00 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:47:00 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:47:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:47:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.172 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.172/0.172/0.172/0.000 ms'}
2025-08-07 11:47:00 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:47:00 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-6615(172.20.0.11) Total jgroups nodes: 2
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-56605(172.20.0.10)
	pg-standby-6615(172.20.0.11)

2025-08-07 11:47:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:47:01 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.055 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.055/0.055/0.055/0.000 ms'}
2025-08-07 11:47:01 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 11:47:01 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:01 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-56605(172.20.0.10).
2025-08-07 11:47:01 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-56605(172.20.0.10)
2025-08-07 11:47:01 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-07 11:47:01 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:47:01 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:47:01 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:47:01 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='109'}
2025-08-07 11:47:01 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:47:01 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:47:01 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:47:01 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:47:01 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-56605(172.20.0.10)
2025-08-07 11:47:01 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:01 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:47:01 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 11:47:01 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:47:01 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-6615(172.20.0.11) Total jgroups nodes: 3
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-56605(172.20.0.10)
	pg-standby-6615(172.20.0.11)
	efm-witness-62326(172.20.0.12)

2025-08-07 11:47:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:47:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.029 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.029/0.029/0.029/0.000 ms'}
2025-08-07 11:47:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 11:47:14 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (1): efm-witness-62326(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:48:53 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:50:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-07 11:50:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Witness', address=efm-witness-62326(172.20.0.12)}, NodeStatus{type='Primary', address=pg-primary-56605(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-6615(172.20.0.11)}]}
2025-08-07 11:50:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-56605(172.20.0.10) promoting: null standbys (1): pg-standby-6615(172.20.0.11)  witnesses (1): efm-witness-62326(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:50:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 11:57:58 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 11:57:58 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 11:57:58 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 11:57:58 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 11:57:58 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 11:57:59 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 11:57:59 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:57:59 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.118 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.118/0.118/0.118/0.000 ms'}
2025-08-07 11:57:59 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 11:57:59 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-50670(172.20.0.11) Total jgroups nodes: 2
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-3167(172.20.0.10)
	pg-standby-50670(172.20.0.11)

2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.126 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.126/0.126/0.126/0.000 ms'}
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:59 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-3167(172.20.0.10).
2025-08-07 11:57:59 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-3167(172.20.0.10)
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 11:57:59 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 11:57:59 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='109'}
2025-08-07 11:57:59 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 11:57:59 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 11:57:59 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-3167(172.20.0.10)
2025-08-07 11:57:59 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:57:59 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 11:57:59 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 11:57:59 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 11:57:59 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-50670(172.20.0.11) Total jgroups nodes: 3
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-3167(172.20.0.10)
	pg-standby-50670(172.20.0.11)
	efm-witness-50408(172.20.0.12)

2025-08-07 11:58:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 11:58:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.044 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.044/0.044/0.044/0.000 ms'}
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 11:58:12 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 11:59:52 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-50670(172.20.0.11) Total jgroups nodes: 2
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 3 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-50670(172.20.0.11)
	efm-witness-50408(172.20.0.12)

2025-08-07 12:01:09 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:01:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:01:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.106 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.106/0.106/0.106/0.000 ms'}
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: pg-primary-3167(172.20.0.10), previous view size: 3, cluster state (not including additions): [ total nodes: 3 primary: pg-primary-3167(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:01:09 com.enterprisedb.efm.ClusterState removeAddress INFO: Removing primary address pg-primary-3167(172.20.0.10)
2025-08-07 12:01:09 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node null
2025-08-07 12:01:09 com.enterprisedb.efm.ClusterState addressFailed INFO: Removed address pg-primary-3167(172.20.0.10) of type PRIMARY, checking before adding to failed list.
2025-08-07 12:01:09 com.enterprisedb.efm.ClusterState addressFailed WARN: Host/IP 172.20.0.10 being added to failed address list.
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.EfmNode handleViewChange ERROR: Primary node has disappeared.
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.EfmNode nodeStillUp INFO: Checking to see if node is responsive. Check type: DB_PING
2025-08-07 12:01:09 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:01:09 com.enterprisedb.efm.nodes.EfmNode lambda$createRemoteNodePingCheck$15 INFO: Telling node efm-witness-50408(172.20.0.12) to ping DB_PING
2025-08-07 12:01:09 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request DB_PING\|172.20.0.10 to node efm-witness-50408(172.20.0.12)
2025-08-07 12:01:09 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-07 12:01:09 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover Manager tried to promote, but primary DB is still running
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover Manager has started promotion steps, but detected that
the primary DB is still running on 172.20.0.10.

This usually indicates that the primary EFM agent has exited.

Failover has NOT occurred. There is no failover protection until
the primary agent is restarted.
2025-08-07 12:01:09 com.enterprisedb.efm.utils.MissingPrimaryNotifier startNotifying INFO: Starting 'missing primary' notifications every 60 minutes until primary agent rejoins.
2025-08-07 12:01:09 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover Manager tried to promote, but primary DB is still running.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-50670(172.20.0.11) Total jgroups nodes: 3
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (1): 172.20.0.10  ]
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Current view is merge view.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-standby-50670(172.20.0.11)
	efm-witness-50408(172.20.0.12)
	pg-primary-41545(172.20.0.10)

2025-08-07 12:01:57 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: verifier thread exiting
2025-08-07 12:01:57 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:01:57 com.enterprisedb.efm.utils.ClusterStateVerifier.TimerThread run INFO: Cluster state verifier thread started.
2025-08-07 12:01:57 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.119 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.119/0.119/0.119/0.000 ms'}
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange WARN: Scheduling cluster state verification because of cluster merge.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Original primary: null, previous view size: 2, cluster state (not including additions): [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (1): 172.20.0.10  ]
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Verify cluster state called with merge: true
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode verifyClusterState ERROR: Unknown node of type Primary at 172.20.0.10 found in cluster.
2025-08-07 12:01:57 com.enterprisedb.efm.ClusterState setPrimary INFO: Setting primary node pg-primary-41545(172.20.0.10)
2025-08-07 12:01:57 com.enterprisedb.efm.ClusterState removeFailedHost INFO: Removing 172.20.0.10 from failed list if present.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: Cluster state after verification: [ total nodes: 3 primary: pg-primary-41545(172.20.0.10) promoting: null standbys (1): pg-standby-50670(172.20.0.11)  witnesses (1): efm-witness-50408(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:01:57 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [SEVERE] EFM Internal state mismatch for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

The failover manager cluster's internal state did not match the
actual state of the cluster members. This is rare and can be caused
by a timing issue of nodes joining the cluster and/or changing their
state. The problem should be resolved, but you should check the cluster
status as well to verify. Details of the mismatch can be found in the
agent log file.
2025-08-07 12:01:57 com.enterprisedb.efm.nodes.EfmNode verifyClusterState INFO: There is already a promoting/primary node in cluster.
2025-08-07 12:01:57 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [SEVERE] EFM Internal state mismatch for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:01:59 com.enterprisedb.efm.utils.ClusterStateVerifier runBackgroundVerification INFO: there is already a verification scheduled
2025-08-07 12:03:31 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 12:03:31 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 12:03:31 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 12:03:31 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 12:03:31 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 12:03:32 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 12:03:32 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:03:32 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.141 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.141/0.141/0.141/0.000 ms'}
2025-08-07 12:03:32 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 12:03:32 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-43969(172.20.0.11) Total jgroups nodes: 2
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-13192(172.20.0.10)
	pg-standby-43969(172.20.0.11)

2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.053 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.053/0.053/0.053/0.000 ms'}
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:32 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-13192(172.20.0.10).
2025-08-07 12:03:32 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-13192(172.20.0.10)
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 12:03:32 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 12:03:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='109'}
2025-08-07 12:03:32 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 12:03:32 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 12:03:32 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-13192(172.20.0.10)
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 12:03:32 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:32 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:03:32 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 12:03:32 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 12:03:32 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-43969(172.20.0.11) Total jgroups nodes: 3
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-13192(172.20.0.10)
	pg-standby-43969(172.20.0.11)
	efm-witness-21098(172.20.0.12)

2025-08-07 12:03:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:03:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.066 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.066/0.066/0.066/0.000 ms'}
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 12:03:45 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (1): efm-witness-21098(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:05:25 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:13:46 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:13:47 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-07 12:13:47 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-07 12:13:47 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-07 12:13:47 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:13:47 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Witness', address=efm-witness-21098(172.20.0.12)}, NodeStatus{type='Primary', address=pg-primary-13192(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-43969(172.20.0.11)}]}
2025-08-07 12:13:47 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-13192(172.20.0.10) promoting: null standbys (1): pg-standby-43969(172.20.0.11)  witnesses (1): efm-witness-21098(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:13:48 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 12:28:27 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 12:28:27 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 12:28:27 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 12:28:27 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 12:28:27 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 12:28:28 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 12:28:28 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:28:28 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.146 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.146/0.146/0.146/0.000 ms'}
2025-08-07 12:28:28 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 12:28:28 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-36746(172.20.0.11) Total jgroups nodes: 2
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-57387(172.20.0.10)
	pg-standby-36746(172.20.0.11)

2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.044 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.044/0.044/0.044/0.000 ms'}
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:28 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-57387(172.20.0.10).
2025-08-07 12:28:28 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-57387(172.20.0.10)
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 12:28:28 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 12:28:28 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='109'}
2025-08-07 12:28:28 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 12:28:28 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:28:28 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-57387(172.20.0.10)
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 12:28:28 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (1): pg-standby-36746(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:28 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 12:28:28 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 12:28:28 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 12:28:28 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-36746(172.20.0.11) Total jgroups nodes: 3
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (1): pg-standby-36746(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-57387(172.20.0.10)
	pg-standby-36746(172.20.0.11)
	efm-witness-4164(172.20.0.12)

2025-08-07 12:28:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 12:28:41 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.066 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.066/0.066/0.066/0.000 ms'}
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 12:28:41 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-57387(172.20.0.10) promoting: null standbys (1): pg-standby-36746(172.20.0.11)  witnesses (1): efm-witness-4164(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 12:30:21 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-07 13:40:32 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-07 13:40:32 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-07 13:40:32 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-07 13:40:32 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-07 13:40:32 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-07 13:40:32 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-07 13:40:32 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 13:40:32 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-07 13:40:32 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-07 13:40:32 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:40:32 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:40:32 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-07 13:40:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:40:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.144 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.144/0.144/0.144/0.000 ms'}
2025-08-07 13:40:32 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-07 13:40:32 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-40823(172.20.0.11) Total jgroups nodes: 2
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-842(172.20.0.10)
	pg-standby-40823(172.20.0.11)

2025-08-07 13:40:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:40:32 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.046 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.046/0.046/0.046/0.000 ms'}
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 13:40:32 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: pg-primary-842(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:32 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-842(172.20.0.10).
2025-08-07 13:40:32 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-842(172.20.0.10)
2025-08-07 13:40:33 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-07 13:40:33 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-07 13:40:33 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-07 13:40:33 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-07 13:40:33 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='109'}
2025-08-07 13:40:33 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-07 13:40:33 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-07 13:40:33 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-842(172.20.0.10)
2025-08-07 13:40:33 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:40:33 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-07 13:40:33 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:33 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-07 13:40:33 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-07 13:40:33 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-07 13:40:33 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-40823(172.20.0.11) Total jgroups nodes: 3
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-842(172.20.0.10)
	pg-standby-40823(172.20.0.11)
	efm-witness-14202(172.20.0.12)

2025-08-07 13:40:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-07 13:40:45 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.075 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.075/0.075/0.075/0.000 ms'}
2025-08-07 13:40:45 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-07 13:40:46 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-07 13:42:25 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 01:55:21 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 01:55:22 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 01:55:22 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 01:55:22 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 01:55:22 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 01:55:22 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 01:55:22 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 01:55:23 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:03:09 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:03:16 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:03:33 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:03:33 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:03:33 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:03:33 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:03:33 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:03:33 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:10:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:10:11 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:10:11 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:10:18 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:10:18 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:18 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received switchover request.
2025-08-08 02:10:18 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: |false|false
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Switchover command passed source node: "", quiet mode: "false", scripts off: "false"
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Using local recovery settings to send to primary.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode doManualPromotion INFO: Starting manual promotion.
2025-08-08 02:10:18 com.enterprisedb.efm.nodes.EfmNode doManualPromotion WARN: Telling primary node pg-primary-842(172.20.0.10) to stop monitoring database.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (1): pg-primary-842(172.20.0.10)  failed (0):  ]
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby promoteNode INFO: Adding doPromoteNode to work queue.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Entering doPromoteNode()
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.188 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.188/0.188/0.188/0.000 ms'}
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Checking to see if primary has rejoined before promoting this standby.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Ignoring own node status.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Idle
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Witness
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Checking for view changes that may have happened while handling this one. Current view size 3 and total nodes is 3.0
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Standby, will now be Promoting.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmPromoting lambda$startPromotionMonitoring$0 INFO: Will monitor database until it is no longer in recovery. At that time, will switch to primary node.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Promoting
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPrePromotionScript INFO: Notifying all nodes to execute pre-promotion script
2025-08-08 02:10:22 com.enterprisedb.efm.utils.RecoveryUtils promoteStandby INFO: Triggering promotion by executing pg_ctl promote.
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions promotestandby /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:10:22 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=0, errorOut='', stdOut='server promoting'}
2025-08-08 02:10:22 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Promotion has started on cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Promotion of standby has started on cluster efm_cluster.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: About to resume replay on promoting node. This is only needed in some cases and will not affect a database that has aleady come out of recovery.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Promotion has started on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Could not resume replay on node being promoted. This is normal if the database has already completed recovery. Message from database server: org.postgresql.util.PSQLException: ERROR: standby promotion is ongoing
  Hint: pg_wal_replay_resume() cannot be executed after promotion is triggered.
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToReconfigureForNewPrimary INFO: Informing all nodes of new promoting/primary address so that they can reconfigure.
2025-08-08 02:10:22 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-standby-40823(172.20.0.11) standbys (0):  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (1): pg-primary-842(172.20.0.10)  failed (0):  ]
2025-08-08 02:10:22 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-standby-40823(172.20.0.11) standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:22 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:10:32 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover has completed on cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover has completed on cluster efm_cluster.
2025-08-08 02:10:32 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover has completed on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:10:32 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Promoting, will now be Primary.
2025-08-08 02:10:32 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:10:32 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:10:32 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:10:32 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:10:32 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPostPromotionScript INFO: Notifying all nodes to execute post-promotion script
2025-08-08 02:10:32 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:39 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:10:39 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:10:39 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:10:39 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:10:39 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:10:40 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:40 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:10:52 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:10:52 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:11:11 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:11:11 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:11:29 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:11:29 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:11:29 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:11:29 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:11:29 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:11:29 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:11:29 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:12:05 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:12:05 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:12:05 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:12:05 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:12:05 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:12:05 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:12:05 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:12:06 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received switchover request.
2025-08-08 02:12:06 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: |false|false
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Switchover command passed source node: "", quiet mode: "false", scripts off: "false"
2025-08-08 02:12:06 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Retrieving recovery information from pg-primary-842(172.20.0.10).
2025-08-08 02:12:06 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_recovery_conf_text to node pg-primary-842(172.20.0.10)
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent prepareForSwitchover WARN: Will prepare for switchover with upcoming promotion.
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmNode doManualPromotion INFO: Starting manual promotion.
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent stopMonitoringForManualPromotion INFO: Will stop monitoring database for manual promotion
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: PROMOTING, previous: MONITORING
2025-08-08 02:12:06 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-08 02:12:06 com.enterprisedb.efm.utils.Utils pause WARN: Thread main interrupted while waiting.
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Db monitor has stopped. Current internal state: PROMOTING
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: For switchover case, not performing cleanup (e.g. dropping VIP) until after db shutdown.
2025-08-08 02:12:06 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.10.
2025-08-08 02:12:06 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.11.
2025-08-08 02:12:06 com.enterprisedb.efm.nodes.EfmAgent stopDatabase WARN: Stopping local database.
2025-08-08 02:12:06 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions stopdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=0, errorOut='', stdOut='waiting for server to shut down....... done
server stopped'}
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Primary, will now be Idle.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Creating list of standbys to consider for promotion.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Only one standby to choose from: StandbyInfo{address=pg-primary-842(172.20.0.10), host='172.20.0.10', receiveLocation='null', replayLocation='null', (latest='')}
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent startMonitoring WARN: Will tell standby at 172.20.0.10 to promote.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Telling standby at 172.20.0.10 to promote.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request promote_self_172.20.0.11 to node pg-primary-842(172.20.0.10)
2025-08-08 02:12:09 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Received value=true, received=true, suspected=false for promote_self_172.20.0.11 from pg-primary-842(172.20.0.10).
2025-08-08 02:12:09 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Node 172.20.0.10 will attempt promotion.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Setting state back to MONITORING instead of PROMOTING
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: PROMOTING
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent run INFO: Running as the db owner: true
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (1): pg-standby-40823(172.20.0.11)  failed (0):  ]
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.11%%false%% %%false
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-primary-842(172.20.0.10) standbys (0):  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (1): pg-standby-40823(172.20.0.11)  failed (0):  ]
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Received signal to switch to new primary. Node type is IDLE and internal state is MONITORING.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Reconfiguring database as standby.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.RecoveryUtils addRecoveryParamsToPrimary INFO: Updating recovery parameters.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent createStandbySignalFile INFO: Creating standby.signal file to start original primary as standby.
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 12:[ /usr/edb/efm-5.0/bin/efm_db_functions touchfile /var/lib/postgresql/data/standby.signal]
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=12, exitValue=0, errorOut='', stdOut=''}
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Restarting database as standby.
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 13:[ /usr/edb/efm-5.0/bin/efm_db_functions startdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:12:09 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=13, exitValue=0, errorOut='', stdOut='waiting for server to start....2025-08-08 02:12:09 GMT [14641]: [1-1] user=,db=,app=,client= LOG:  redirecting log output to logging collector process
2025-08-08 02:12:09 GMT [14641]: [2-1] user=,db=,app=,client= HINT:  Future log output will appear in directory "/var/log/postgresql".
 done
server started'}
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoringWithRetries INFO: Resuming monitoring.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Database version has already been set in environment.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Idle, will now be Standby.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.EfmAgent lambda$resumeMonitoring$3 INFO: Resuming monitoring.
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:12:09 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-842(172.20.0.10)
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:12:09 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:12:09 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-primary-842(172.20.0.10) standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor lambda$watchDB$1 WARN: Database connection is null.
2025-08-08 02:12:09 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:12:09 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:12:13 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:12:13 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:12:13 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:12:13 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:12:13 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Promoting', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:12:13 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-primary-842(172.20.0.10) standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:12:17 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:12:17 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:12:17 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:12:17 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:12:17 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Promoting', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:12:17 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: null promoting: pg-primary-842(172.20.0.10) standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:12:19 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Enabling fencing/post-promotion scripts on this node.
2025-08-08 02:12:19 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:12:23 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:12:23 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:12:23 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:12:23 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:12:23 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:12:23 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:05 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:05 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:05 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:05 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:14:05 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:05 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:17 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:14:27 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:27 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Primary', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-842(172.20.0.10) promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:27 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received switchover request.
2025-08-08 02:14:27 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: |false|false
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Switchover command passed source node: "", quiet mode: "false", scripts off: "false"
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode doSwitchover INFO: Using local recovery settings to send to primary.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode doManualPromotion INFO: Starting manual promotion.
2025-08-08 02:14:27 com.enterprisedb.efm.nodes.EfmNode doManualPromotion WARN: Telling primary node pg-primary-842(172.20.0.10) to stop monitoring database.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby promoteNode INFO: Adding doPromoteNode to work queue.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-40823(172.20.0.11)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (1): pg-primary-842(172.20.0.10)  failed (0):  ]
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Entering doPromoteNode()
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 15:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=15, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.258 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.258/0.258/0.258/0.000 ms'}
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Checking to see if primary has rejoined before promoting this standby.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Ignoring own node status.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Idle
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Witness
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Checking for view changes that may have happened while handling this one. Current view size 3 and total nodes is 3.0
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Standby, will now be Promoting.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmPromoting lambda$startPromotionMonitoring$0 INFO: Will monitor database until it is no longer in recovery. At that time, will switch to primary node.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Promoting
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPrePromotionScript INFO: Notifying all nodes to execute pre-promotion script
2025-08-08 02:14:30 com.enterprisedb.efm.utils.RecoveryUtils promoteStandby INFO: Triggering promotion by executing pg_ctl promote.
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 16:[ /usr/edb/efm-5.0/bin/efm_db_functions promotestandby /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:14:30 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=16, exitValue=0, errorOut='', stdOut='server promoting'}
2025-08-08 02:14:30 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Promotion has started on cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Promotion of standby has started on cluster efm_cluster.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: About to resume replay on promoting node. This is only needed in some cases and will not affect a database that has aleady come out of recovery.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Promotion has started on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Could not resume replay on node being promoted. This is normal if the database has already completed recovery. Message from database server: org.postgresql.util.PSQLException: ERROR: standby promotion is ongoing
  Hint: pg_wal_replay_resume() cannot be executed after promotion is triggered.
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToReconfigureForNewPrimary INFO: Informing all nodes of new promoting/primary address so that they can reconfigure.
2025-08-08 02:14:30 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-standby-40823(172.20.0.11) standbys (0):  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (1): pg-primary-842(172.20.0.10)  failed (0):  ]
2025-08-08 02:14:30 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-standby-40823(172.20.0.11) standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:30 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:14:37 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.11%%true%% %%false
2025-08-08 02:14:40 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover has completed on cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover has completed on cluster efm_cluster.
2025-08-08 02:14:40 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover has completed on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:14:40 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Promoting, will now be Primary.
2025-08-08 02:14:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:14:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:14:40 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:14:40 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:14:40 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPostPromotionScript INFO: Notifying all nodes to execute post-promotion script
2025-08-08 02:14:40 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:14:43 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:43 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:14:45 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:45 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:14:56 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:14:56 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:14:56 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:14:56 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:14:56 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:14:56 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-standby-40823(172.20.0.11)}, NodeStatus{type='Standby', address=pg-primary-842(172.20.0.10)}, NodeStatus{type='Witness', address=efm-witness-14202(172.20.0.12)}]}
2025-08-08 02:14:56 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-40823(172.20.0.11) promoting: null standbys (1): pg-primary-842(172.20.0.10)  witnesses (1): efm-witness-14202(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:16:40 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 17:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:16:40 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=17, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:18:04 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-08 02:18:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-08 02:18:04 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-08 02:18:04 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-08 02:18:04 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-08 02:18:05 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-08 02:18:05 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:18:05 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: false
2025-08-08 02:18:05 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:18:05 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:18:05 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.102 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.102/0.102/0.102/0.000 ms'}
2025-08-08 02:18:05 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-08 02:18:05 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-8889(172.20.0.11) Total jgroups nodes: 2
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-60825(172.20.0.10)
	pg-standby-8889(172.20.0.11)

2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.045 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.045/0.045/0.045/0.000 ms'}
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: null promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:05 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-60825(172.20.0.10).
2025-08-08 02:18:05 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-60825(172.20.0.10)
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-08 02:18:05 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-08 02:18:05 com.enterprisedb.efm.utils.MissingPrimaryNotifier stopNotifying INFO: 'Missing primary' notification service shutdown called.
2025-08-08 02:18:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='118'}
2025-08-08 02:18:05 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-08 02:18:05 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:18:05 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Primary agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Primary agent is running and database health is being monitored.
2025-08-08 02:18:05 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:18:05 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Primary agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:18:05 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:05 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-8889(172.20.0.11) Total jgroups nodes: 3
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-60825(172.20.0.10)
	pg-standby-8889(172.20.0.11)
	efm-witness-6116(172.20.0.12)

2025-08-08 02:18:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:18:18 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.050 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.050/0.050/0.050/0.000 ms'}
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-08 02:18:18 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:19:58 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:19:58 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:20:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 8:[ /usr/edb/efm-5.0/bin/efm_db_functions extrecconfexists /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:20:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=8, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:21:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 9:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/recovery.signal]
2025-08-08 02:21:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=9, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:22:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 10:[ /usr/edb/efm-5.0/bin/efm_db_functions fileexists /etc/edb/efm-5.0/efm_cluster.properties /var/lib/postgresql/data/standby.signal]
2025-08-08 02:22:05 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=10, exitValue=1, errorOut='', stdOut=''}
2025-08-08 02:28:48 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:28:48 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:28:56 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:28:56 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:28:56 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:28:56 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:28:56 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:28:56 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Primary', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:28:56 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:29:08 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:29:08 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent prepareForSwitchover WARN: Will prepare for switchover with upcoming promotion.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent stopMonitoringForManualPromotion INFO: Will stop monitoring database for manual promotion
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: PROMOTING, previous: MONITORING
2025-08-08 02:29:08 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-08 02:29:08 com.enterprisedb.efm.utils.Utils pause WARN: Thread main interrupted while waiting.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Db monitor has stopped. Current internal state: PROMOTING
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: For switchover case, not performing cleanup (e.g. dropping VIP) until after db shutdown.
2025-08-08 02:29:08 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.10.
2025-08-08 02:29:08 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.11.
2025-08-08 02:29:08 com.enterprisedb.efm.nodes.EfmAgent stopDatabase WARN: Stopping local database.
2025-08-08 02:29:08 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 11:[ /usr/edb/efm-5.0/bin/efm_db_functions stopdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:29:11 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=11, exitValue=0, errorOut='', stdOut='waiting for server to shut down....... done
server stopped'}
2025-08-08 02:29:11 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Primary, will now be Idle.
2025-08-08 02:29:11 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-08 02:29:11 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Creating list of standbys to consider for promotion.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Only one standby to choose from: StandbyInfo{address=pg-primary-60825(172.20.0.10), host='172.20.0.10', receiveLocation='null', replayLocation='null', (latest='')}
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent startMonitoring WARN: Will tell standby at 172.20.0.10 to promote.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Telling standby at 172.20.0.10 to promote.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request promote_self_172.20.0.11 to node pg-primary-60825(172.20.0.10)
2025-08-08 02:29:12 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Received value=true, received=true, suspected=false for promote_self_172.20.0.11 from pg-primary-60825(172.20.0.10).
2025-08-08 02:29:12 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Node 172.20.0.10 will attempt promotion.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Setting state back to MONITORING instead of PROMOTING
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: PROMOTING
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent run INFO: Running as the db owner: true
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (1): pg-standby-8889(172.20.0.11)  failed (0):  ]
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.11%%false%% %%false
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (0):  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (1): pg-standby-8889(172.20.0.11)  failed (0):  ]
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Received signal to switch to new primary. Node type is IDLE and internal state is MONITORING.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Reconfiguring database as standby.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.RecoveryUtils addRecoveryParamsToPrimary INFO: Updating recovery parameters.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent createStandbySignalFile INFO: Creating standby.signal file to start original primary as standby.
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 12:[ /usr/edb/efm-5.0/bin/efm_db_functions touchfile /var/lib/postgresql/data/standby.signal]
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=12, exitValue=0, errorOut='', stdOut=''}
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Restarting database as standby.
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 13:[ /usr/edb/efm-5.0/bin/efm_db_functions startdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:29:12 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=13, exitValue=0, errorOut='', stdOut='waiting for server to start....2025-08-08 02:29:12 GMT [686]: [1-1] user=,db=,app=,client= LOG:  redirecting log output to logging collector process
2025-08-08 02:29:12 GMT [686]: [2-1] user=,db=,app=,client= HINT:  Future log output will appear in directory "/var/log/postgresql".
 done
server started'}
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoringWithRetries INFO: Resuming monitoring.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Database version has already been set in environment.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Idle, will now be Standby.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent lambda$resumeMonitoring$3 INFO: Resuming monitoring.
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:29:12 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-60825(172.20.0.10)
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor lambda$watchDB$1 WARN: Database connection is null.
2025-08-08 02:29:12 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:29:12 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:29:12 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:29:19 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:29:22 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Enabling fencing/post-promotion scripts on this node.
2025-08-08 02:29:22 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-60825(172.20.0.10) promoting: null standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:29:25 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 02:29:25 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 02:29:25 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 02:29:25 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:29:25 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Primary', address=pg-primary-60825(172.20.0.10)}, NodeStatus{type='Standby', address=pg-standby-8889(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-6116(172.20.0.12)}]}
2025-08-08 02:29:25 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-60825(172.20.0.10) promoting: null standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:31:58 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:31:59 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Node is being asked for recovery parameters. Returning 172.20.0.11 for primary to pull params.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (1): pg-primary-60825(172.20.0.10)  failed (0):  ]
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby promoteNode INFO: Adding doPromoteNode to work queue.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Entering doPromoteNode()
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 15:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=15, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.217 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.217/0.217/0.217/0.000 ms'}
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Checking to see if primary has rejoined before promoting this standby.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Idle
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Ignoring own node status.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby primaryFoundInCluster INFO: Found node of type Witness
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Checking for view changes that may have happened while handling this one. Current view size 3 and total nodes is 3.0
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.11
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Standby, will now be Promoting.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmPromoting lambda$startPromotionMonitoring$0 INFO: Will monitor database until it is no longer in recovery. At that time, will switch to primary node.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Promoting
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPrePromotionScript INFO: Notifying all nodes to execute pre-promotion script
2025-08-08 02:32:02 com.enterprisedb.efm.utils.RecoveryUtils promoteStandby INFO: Triggering promotion by executing pg_ctl promote.
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 16:[ /usr/edb/efm-5.0/bin/efm_db_functions promotestandby /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:32:02 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=16, exitValue=0, errorOut='', stdOut='server promoting'}
2025-08-08 02:32:02 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Promotion has started on cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Promotion of standby has started on cluster efm_cluster.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: About to resume replay on promoting node. This is only needed in some cases and will not affect a database that has aleady come out of recovery.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Promotion has started on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmStandby doPromoteNode INFO: Could not resume replay on node being promoted. This is normal if the database has already completed recovery. Message from database server: org.postgresql.util.PSQLException: ERROR: standby promotion is ongoing
  Hint: pg_wal_replay_resume() cannot be executed after promotion is triggered.
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToReconfigureForNewPrimary INFO: Informing all nodes of new promoting/primary address so that they can reconfigure.
2025-08-08 02:32:02 com.enterprisedb.efm.utils.VipMonitor stopMonitoring INFO: Stopping vip monitor
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-standby-8889(172.20.0.11) standbys (0):  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (1): pg-primary-60825(172.20.0.10)  failed (0):  ]
2025-08-08 02:32:02 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-standby-8889(172.20.0.11) standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:32:02 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.10:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:32:03 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Promoting%%172.20.0.11%%true%% %%false
2025-08-08 02:32:12 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [WARNING] EFM Failover has completed on cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Failover has completed on cluster efm_cluster.
2025-08-08 02:32:12 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [WARNING] EFM Failover has completed on cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:32:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Promoting, will now be Primary.
2025-08-08 02:32:12 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.conf monitor for: /var/lib/postgresql/data/recovery.conf
2025-08-08 02:32:12 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting recovery.signal monitor for: /var/lib/postgresql/data/recovery.signal
2025-08-08 02:32:12 com.enterprisedb.efm.utils.RecoveryFilesMonitor startMonitoring INFO: Starting standby.signal monitor for: /var/lib/postgresql/data/standby.signal
2025-08-08 02:32:12 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Primary
2025-08-08 02:32:12 com.enterprisedb.efm.nodes.EfmAgent notifyNodesToRunPostPromotionScript INFO: Notifying all nodes to execute post-promotion script
2025-08-08 02:32:12 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-standby-8889(172.20.0.11) promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:33:03 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:33:03 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:33:04 com.enterprisedb.efm.DBMonitor checkPrimaryNumSync INFO: Sync replication not set.
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Primary%%172.20.0.11%%true%% %%false
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent prepareForSwitchover WARN: Will prepare for switchover with upcoming promotion.
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent stopMonitoringForManualPromotion INFO: Will stop monitoring database for manual promotion
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: PROMOTING, previous: MONITORING
2025-08-08 02:33:04 com.enterprisedb.efm.DBMonitor shutdown INFO: Shutdown called on DB monitor.
2025-08-08 02:33:04 com.enterprisedb.efm.utils.Utils pause WARN: Thread db_monitor_resumed interrupted while waiting.
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Db monitor has stopped. Current internal state: PROMOTING
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: For switchover case, not performing cleanup (e.g. dropping VIP) until after db shutdown.
2025-08-08 02:33:04 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.10.
2025-08-08 02:33:04 com.enterprisedb.efm.utils.RecoveryUtils getRecoveryParameterInfo INFO: Pulling all recovery parameters from database at 172.20.0.11.
2025-08-08 02:33:04 com.enterprisedb.efm.nodes.EfmAgent stopDatabase WARN: Stopping local database.
2025-08-08 02:33:04 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 17:[ /usr/edb/efm-5.0/bin/efm_db_functions stopdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=17, exitValue=0, errorOut='', stdOut='waiting for server to shut down....... done
server stopped'}
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Primary, will now be Idle.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Idle
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Creating list of standbys to consider for promotion.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode chooseStandbyForPromotion INFO: Only one standby to choose from: StandbyInfo{address=pg-primary-60825(172.20.0.10), host='172.20.0.10', receiveLocation='null', replayLocation='null', (latest='')}
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent startMonitoring WARN: Will tell standby at 172.20.0.10 to promote.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Telling standby at 172.20.0.10 to promote.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request promote_self_172.20.0.11 to node pg-primary-60825(172.20.0.10)
2025-08-08 02:33:07 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Received value=true, received=true, suspected=false for promote_self_172.20.0.11 from pg-primary-60825(172.20.0.10).
2025-08-08 02:33:07 com.enterprisedb.efm.utils.ClusterUtils tellRemoteStandbyToPromote INFO: Node 172.20.0.10 will attempt promotion.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent startMonitoring INFO: Setting state back to MONITORING instead of PROMOTING
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: PROMOTING
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: null standbys (1): pg-primary-60825(172.20.0.10)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (1): pg-standby-8889(172.20.0.11)  failed (0):  ]
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Idle%%172.20.0.11%%false%% %%false
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmNode setLastPromoted INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Last promoted address set to 172.20.0.10
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (0):  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (1): pg-standby-8889(172.20.0.11)  failed (0):  ]
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Received signal to switch to new primary. Node type is IDLE and internal state is MONITORING.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Reconfiguring database as standby.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.RecoveryUtils addRecoveryParamsToPrimary INFO: Updating recovery parameters.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent createStandbySignalFile INFO: Creating standby.signal file to start original primary as standby.
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 18:[ /usr/edb/efm-5.0/bin/efm_db_functions touchfile /var/lib/postgresql/data/standby.signal]
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=18, exitValue=0, errorOut='', stdOut=''}
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent reconfigureAsStandby INFO: Restarting database as standby.
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 19:[ /usr/edb/efm-5.0/bin/efm_db_functions startdb /etc/edb/efm-5.0/efm_cluster.properties]
2025-08-08 02:33:07 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=19, exitValue=0, errorOut='', stdOut='waiting for server to start....2025-08-08 02:33:07 GMT [995]: [1-1] user=,db=,app=,client= LOG:  redirecting log output to logging collector process
2025-08-08 02:33:07 GMT [995]: [2-1] user=,db=,app=,client= HINT:  Future log output will appear in directory "/var/log/postgresql".
 done
server started'}
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoringWithRetries INFO: Resuming monitoring.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Connecting to database and determining recovery status
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent resumeMonitoring INFO: Database version has already been set in environment.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: setAgentDelegate: I was Idle, will now be Standby.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.EfmAgent lambda$resumeMonitoring$3 INFO: Resuming monitoring.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-60825(172.20.0.10)
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:33:07 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: null promoting: pg-primary-60825(172.20.0.10) standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:33:07 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:33:07 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:33:07 com.enterprisedb.efm.DBMonitor lambda$watchDB$1 WARN: Database connection is null.
2025-08-08 02:33:07 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:33:14 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:33:16 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:33:17 com.enterprisedb.efm.nodes.JGroupsDelegate handle INFO: Enabling fencing/post-promotion scripts on this node.
2025-08-08 02:33:17 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-60825(172.20.0.10) promoting: null standbys (1): pg-standby-8889(172.20.0.11)  witnesses (1): efm-witness-6116(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:33:19 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 02:56:59 com.enterprisedb.efm.Environment doInit INFO: Properties loaded from /etc/edb/efm-5.0/efm_cluster.properties
2025-08-08 02:56:59 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'false' for property detach.on.agent.failure.
2025-08-08 02:56:59 com.enterprisedb.efm.Environment doInit INFO: Setting default value 'true' for property enable.stop.cluster.
2025-08-08 02:56:59 com.enterprisedb.efm.Environment doInit INFO: Starting Failover Manager, version 5.0 using /usr/lib/jvm/java-17-openjdk-arm64
2025-08-08 02:56:59 com.enterprisedb.efm.Environment doInit INFO: Running as database service owner: postgres
2025-08-08 02:57:00 com.enterprisedb.efm.Environment setSourceEmail INFO: Using default source email.
2025-08-08 02:57:00 com.enterprisedb.efm.utils.LockFile lock INFO: Created lock file: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:57:00 com.enterprisedb.efm.utils.LockFile lock INFO: Starting lock monitor for: /var/run/efm-5.0/efm_cluster.lock
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor logJdbcProperties INFO: jdbc properties:
password=*****
logUnclosedConnections=true
user=efm

2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor doPermissionsCheck INFO: Performing permission query for database user efm on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Performing pg_is_in_recovery query on jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor isInRecovery INFO: Query result: true
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmAgent setAgentDelegate INFO: Setting agent to type Standby
2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 4:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=4, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.385 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.385/0.385/0.385/0.000 ms'}
2025-08-08 02:57:00 com.enterprisedb.efm.admin.AdminServer lambda$start$0 INFO: AdminServer starting on port: 7809
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode doStartup INFO: Starting
2025-08-08 02:57:00 com.enterprisedb.efm.Environment parseHostList INFO: Host list: [172.20.0.10:7800, 172.20.0.11:7800, 172.20.0.12:7800]
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-56895(172.20.0.11) Total jgroups nodes: 2
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 0 primary: null promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-2485(172.20.0.10)
	pg-standby-56895(172.20.0.11)

2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 5:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=5, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.038 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.038/0.038/0.038/0.000 ms'}
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 1 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (0):  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:00 com.enterprisedb.efm.utils.Utils comparePropsWithCoordinator INFO: Checking shared properties with pg-primary-2485(172.20.0.10).
2025-08-08 02:57:00 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request get_properties to node pg-primary-2485(172.20.0.10)
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode canPingAllDBs INFO: Testing remote database connections.
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.EfmNode setNodeState INFO: New internal state: MONITORING, previous: STARTING
2025-08-08 02:57:00 com.enterprisedb.efm.utils.BackgroundClusterStateVerifier start INFO: Background cluster state verifier starting.
2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 6:[sh, -c, ps h -o ppid $$]
2025-08-08 02:57:00 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=6, exitValue=0, errorOut='', stdOut='109'}
2025-08-08 02:57:00 com.enterprisedb.efm.utils.PrimaryNumSyncMonitor start INFO: Service to check primary num_sync starting.
2025-08-08 02:57:00 com.enterprisedb.efm.exec.AgentLauncher signalStartToLauncher INFO: Agent signaling: the_agent_is_running
2025-08-08 02:57:00 com.enterprisedb.efm.utils.ClusterUtils getObjectFromNode INFO: Sending request physical_slot_info_request to node pg-primary-2485(172.20.0.10)
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor watchDB INFO: DBMonitor connecting to jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor watchDB INFO: Using ssl mode disable for jdbc connections.
2025-08-08 02:57:00 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 2 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:00 com.enterprisedb.efm.DBMonitor checkOnce INFO: DB monitor testing jdbc:postgresql://172.20.0.11:5432/postgres?ApplicationName=efm-5.0
2025-08-08 02:57:00 com.enterprisedb.efm.utils.Notifications sendMail INFO: Sending notification:
From: efm@localhost
To: [admin@example.com]
Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster
Body:
EFM node:     172.20.0.11
Cluster name:  efm_cluster
Database name: postgres
VIP:

Standby agent is running and database health is being monitored.
2025-08-08 02:57:00 com.enterprisedb.efm.utils.CustomMonitor start INFO: Custom monitoring is not being used.
2025-08-08 02:57:00 com.enterprisedb.efm.utils.Notifications lambda$sendMail$0 WARN: Unable to send mail. Subject: [INFO] EFM Standby agent running on 172.20.0.11 for cluster efm_cluster.
Error: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: localhost, 25; timeout 60000;
  nested exception is:
	java.net.ConnectException: Connection refused.
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.JGroupsDelegate viewAccepted INFO: View changed. I am pg-standby-56895(172.20.0.11) Total jgroups nodes: 3
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Cluster state before handling view change: [ total nodes: 2 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (0):  idle nodes (0):  failed (0):  ]
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: 
view:	pg-primary-2485(172.20.0.10)
	pg-standby-56895(172.20.0.11)
	efm-witness-11471(172.20.0.12)

2025-08-08 02:57:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: 7:[/scripts/ping_wrapper.sh 172.20.0.5]
2025-08-08 02:57:13 com.enterprisedb.efm.exec.ExecUtil performExec INFO: ProcessResult{id=7, exitValue=0, errorOut='', stdOut='PING 172.20.0.5 (172.20.0.5) 56(84) bytes of data.
64 bytes from 172.20.0.5: icmp_seq=1 ttl=64 time=0.049 ms

--- 172.20.0.5 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.049/0.049/0.049/0.000 ms'}
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.EfmNode handleViewChange INFO: Non-coordinator returning from view change.
2025-08-08 02:57:13 com.enterprisedb.efm.nodes.JGroupsDelegate setState INFO: setState called: [ total nodes: 3 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (1): efm-witness-11471(172.20.0.12)  idle nodes (0):  failed (0):  ]
2025-08-08 02:58:53 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 03:23:02 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 03:23:08 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Admin server received status request.
2025-08-08 03:23:08 com.enterprisedb.efm.admin.AdminServerThread processRequest INFO: Received param: efm_cluster
2025-08-08 03:23:08 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Sending status message to all nodes: node_status
2025-08-08 03:23:08 com.enterprisedb.efm.nodes.EfmAgent handleStatusCall INFO: responding to db status request with status: Standby%%172.20.0.11%%true%% %%false
2025-08-08 03:23:08 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Status response: EfmStatus{nodeStatusList=[NodeStatus{type='Standby', address=pg-standby-56895(172.20.0.11)}, NodeStatus{type='Witness', address=efm-witness-11471(172.20.0.12)}, NodeStatus{type='Primary', address=pg-primary-2485(172.20.0.10)}]}
2025-08-08 03:23:08 com.enterprisedb.efm.nodes.EfmNode checkClusterStatus INFO: Current internal status: [ total nodes: 3 primary: pg-primary-2485(172.20.0.10) promoting: null standbys (1): pg-standby-56895(172.20.0.11)  witnesses (1): efm-witness-11471(172.20.0.12)  idle nodes (0):  failed (0):  ]
